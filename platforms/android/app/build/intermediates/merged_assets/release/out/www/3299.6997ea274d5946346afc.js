(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[3299],{3299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GetionDeClientsPageModule:()=>S});var o=n(8583),i=n(665),r=n(2859),l=n(4617),s=n(4762),a=n(7716),c=n(6086),u=n(1811),m=n(5090),g=n(2468);function p(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function h(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function d(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function f(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function Z(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function C(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function b(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function q(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function T(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function A(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function v(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function _(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function x(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function I(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function U(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-content"),a.TgZ(1,"ion-item",8),a.TgZ(2,"ion-label",9),a._uU(3,"Ajouter un(e) client(e)"),a.qZA(),a.qZA(),a.TgZ(4,"form",10),a.NdJ("ngSubmit",function(){return a.CHM(e),a.oxw().addClient()}),a.TgZ(5,"ion-item"),a.TgZ(6,"ion-label",1),a._uU(7,"nom:"),a.qZA(),a._UZ(8,"ion-input",11),a.YNc(9,p,2,0,"span",12),a.YNc(10,h,2,0,"span",12),a.qZA(),a.TgZ(11,"ion-item"),a.TgZ(12,"ion-label",1),a._uU(13,"Pr\xe9nom:"),a.qZA(),a._UZ(14,"ion-input",13),a.YNc(15,d,2,0,"span",12),a.YNc(16,f,2,0,"span",12),a.qZA(),a.TgZ(17,"ion-item"),a.TgZ(18,"ion-label",1),a._uU(19,"Email:"),a.qZA(),a._UZ(20,"ion-input",14),a.YNc(21,Z,2,0,"span",12),a.YNc(22,C,2,0,"span",12),a.qZA(),a.TgZ(23,"ion-item"),a.TgZ(24,"ion-label",1),a._uU(25,"T\xe9l\xe9phone fixe:"),a.qZA(),a._UZ(26,"ion-input",15),a.YNc(27,b,2,0,"span",12),a.YNc(28,q,2,0,"span",12),a.qZA(),a.TgZ(29,"ion-item"),a.TgZ(30,"ion-label",1),a._uU(31,"T\xe9l\xe9phone portable:"),a.qZA(),a._UZ(32,"ion-input",16),a.YNc(33,T,2,0,"span",12),a.YNc(34,A,2,0,"span",12),a.qZA(),a.TgZ(35,"ion-item"),a.TgZ(36,"ion-label",1),a._uU(37,"Adresse:"),a.qZA(),a._UZ(38,"ion-input",17),a.YNc(39,v,2,0,"span",12),a.YNc(40,_,2,0,"span",12),a.qZA(),a.TgZ(41,"ion-item"),a.TgZ(42,"ion-label",1),a._uU(43,"Code postal:"),a.qZA(),a._UZ(44,"ion-input",18),a.YNc(45,x,2,0,"span",12),a.YNc(46,I,2,0,"span",12),a.qZA(),a.TgZ(47,"ion-button",19),a._uU(48,"Valider"),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Q6J("formGroup",e.clientFrom),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.nom.errors?null:e.errorControl.nom.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.nom.errors?null:e.errorControl.nom.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.prenom.errors?null:e.errorControl.prenom.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.prenom.errors?null:e.errorControl.prenom.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.email.errors?null:e.errorControl.email.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.email.errors?null:e.errorControl.email.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.fixe.errors?null:e.errorControl.fixe.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.fixe.errors?null:e.errorControl.fixe.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.portable.errors?null:e.errorControl.portable.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.portable.errors?null:e.errorControl.portable.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.adresse.errors?null:e.errorControl.adresse.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.adresse.errors?null:e.errorControl.adresse.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.postal.errors?null:e.errorControl.postal.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.postal.errors?null:e.errorControl.postal.errors.minlength))}}function J(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-list"),a.TgZ(1,"ion-item-sliding"),a.TgZ(2,"ion-item"),a.TgZ(3,"ion-label",1),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"ion-item-options",24),a.TgZ(6,"ion-item-option",25),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).delete(t.id)}),a._UZ(7,"ion-icon",26),a.qZA(),a.TgZ(8,"ion-item-option",25),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).update(t.id)}),a._UZ(9,"img",27),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(4),a.AsE("",e.nom," ",e.prenom,"")}}function N(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-content"),a.TgZ(1,"ion-item",8),a.TgZ(2,"ion-label",1),a._uU(3," Liste des clients"),a.qZA(),a.qZA(),a.TgZ(4,"ion-item"),a.TgZ(5,"ion-searchbar",21),a.NdJ("ionChange",function(t){return a.CHM(e),a.oxw().filterList(t)}),a.qZA(),a.qZA(),a.TgZ(6,"ion-refresher",22),a.NdJ("ionRefresh",function(t){return a.CHM(e),a.oxw().doRefresh(t)}),a._UZ(7,"ion-refresher-content"),a.qZA(),a.YNc(8,J,10,2,"ion-list",23),a.qZA()}if(2&e){const e=a.oxw();a.xp6(8),a.Q6J("ngForOf",e.clientsList)}}const k=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i,r,l){this.formBuilder=e,this.toastCtrl=t,this.clientService=n,this.modalController=o,this.firestore=i,this.router=r,this.dataService=l,this.isSubmitted=!1,this.tableauClients=[],this.client={id:"",nom:"",prenom:"",email:"",fixe:"",portable:"",adresse:"",postal:""}}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){void 0===this.affichage&&(this.affichage="liste"),this.clientsList=yield this.initializeItems(),this.clientFrom=this.formBuilder.group({nom:["",[i.kI.required,i.kI.minLength(2)]],prenom:["",[i.kI.required,i.kI.minLength(2)]],email:["",[i.kI.required,i.kI.minLength(2),i.kI.email]],fixe:["",[i.kI.maxLength(10)]],portable:["",[i.kI.required,i.kI.maxLength(10)]],adresse:["",[i.kI.required,i.kI.minLength(2)]],postal:["",[i.kI.required,i.kI.maxLength(5)]]})})}segmentChanged(e){this.affichage=e.detail.value}initializeItems(){return(0,s.mG)(this,void 0,void 0,function*(){return this.tableauClients=[],this.tableauClients=yield this.clientService.getClientsList(),this.tableauClients})}filterList(e){return(0,s.mG)(this,void 0,void 0,function*(){this.clientsList=yield this.initializeItems();const t=e.srcElement.value;t&&(this.clientsList=this.clientsList.filter(e=>{if(e.nom&&t)return e.nom.toLowerCase().indexOf(t.toLowerCase())>-1||e.prenom.toLowerCase().indexOf(t.toLowerCase())>-1}))})}doRefresh(e){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.initializeItems();console.log("Begin async operation"),setTimeout(()=>{this.clientsList=t,console.log("Async operation has ended"),e.target.complete()},2e3)})}get errorControl(){return this.clientFrom.controls}addClient(){this.clientFrom.valid?(this.client.nom=this.clientFrom.value.nom,this.client.prenom=this.clientFrom.value.prenom,this.client.email=this.clientFrom.value.email,this.client.fixe=this.clientFrom.value.fixe,this.client.portable=this.clientFrom.value.portable,this.client.adresse=this.clientFrom.value.adresse,this.client.postal=this.clientFrom.value.postal,this.clientService.postClient(this.client).then(e=>{null==e.id?(this.message="les donn\xe9es n'ont pas pu \xeatre enregistr\xe9es",this.toastCtrl.showToast(this.message)):(this.firestore.doc(`Client/${e.id}`).set({id:e.id,nom:this.clientFrom.value.nom,prenom:this.clientFrom.value.prenom,email:this.clientFrom.value.email,fixe:this.clientFrom.value.fixe,portable:this.clientFrom.value.portable,adresse:this.clientFrom.value.adresse,postal:this.clientFrom.value.postal}),this.message="les donn\xe9es ont pu \xeatre enregistr\xe9es",this.toastCtrl.showToast(this.message))})):(this.message="enter une valeur dans le champ",this.toastCtrl.showToast(this.message))}update(e){return(0,s.mG)(this,void 0,void 0,function*(){this.dataService.setData("idClient",e),this.router.navigateByUrl("details-client")})}delete(e){return(0,s.mG)(this,void 0,void 0,function*(){console.log(e),this.clientService.deleteClient(e),this.tableauClients=[],this.clientsList=yield this.initializeItems()})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(i.qu),a.Y36(c.a),a.Y36(u.y),a.Y36(r.IN),a.Y36(m.ST),a.Y36(l.F0),a.Y36(g.D))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-getion-de-clients"]],decls:16,vars:2,consts:[["slot","start"],["color","light"],["value","liste",3,"ionChange"],["value","ajouter"],["name","add-circle-outline","size","small"],["value","liste"],["name","list-outline","size","small"],[4,"ngIf"],[1,"titre"],["color","light",1,"ajouter"],["color","light",3,"formGroup","ngSubmit"],["color","light","type","text","placeholder","nom","formControlName","nom"],["class","error ion-padding","color","light","class","color",4,"ngIf"],["color","light","type","text","placeholder","prenom","formControlName","prenom"],["color","light","type","email","placeholder","email","formControlName","email"],["color","light","type","number","placeholder","fixe","formControlName","fixe"],["color","light","type","number","placeholder","portable","formControlName","portable"],["color","light","type","text","placeholder","adresse","formControlName","adresse"],["color","light","type","number","placeholder","postal","formControlName","postal"],["type","submit","expand","block"],["color","light",1,"color"],["placeholder","recherche",3,"ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"],["src","https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-menu-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5,"Getion de Clients"),a.qZA(),a.qZA(),a.TgZ(6,"ion-toolbar"),a.TgZ(7,"ion-segment",2),a.NdJ("ionChange",function(e){return t.segmentChanged(e)}),a.TgZ(8,"ion-segment-button",3),a.TgZ(9,"ion-label"),a._UZ(10,"ion-icon",4),a.qZA(),a.qZA(),a.TgZ(11,"ion-segment-button",5),a.TgZ(12,"ion-label"),a._UZ(13,"ion-icon",6),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(14,U,49,15,"ion-content",7),a.YNc(15,N,9,1,"ion-content",7)),2&e&&(a.xp6(14),a.Q6J("ngIf","ajouter"===t.affichage),a.xp6(1),a.Q6J("ngIf","ajouter"!==t.affichage))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.cJ,r.QI,r.GO,r.Q$,r.gu,o.O5,r.W2,r.Ie,i._Y,i.JL,i.sg,r.pK,r.j9,i.JJ,i.u,r.as,r.YG,r.VI,r.nJ,r.Wo,o.sg,r.q_,r.td,r.IK,r.u8],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#7397be}ion-item[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.titre[_ngcontent-%COMP%]{font-size:larger;padding:.5em;margin-top:2em;text-align:center}"]}),e})()}];let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[l.Bz.forChild(k)],l.Bz]}),e})(),S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.ez,i.u5,i.UX,r.Pc,F]]}),e})()},1811:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var o=n(8049),i=n(7716),r=n(5090),l=n(1792);let s=(()=>{class e{constructor(e,t){this.firestore=e,this.afSG=t,this.ref="Client",this.client=this.firestore.collection("Client")}getListClients(){return this.client.valueChanges()}getClientsList(){return this.client.valueChanges().pipe((0,o.P)()).toPromise()}postClient(e){return this.client.add(e)}getClient(e){return this.client.doc("/"+e).valueChanges().pipe((0,o.P)()).toPromise()}updateClient(e,t){this.client.doc("/"+e).update(t)}deleteClient(e){return this.client.doc("/"+e).delete()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.ST),i.LFG(l.Q1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6086:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var o=n(7716),i=n(2859);let r=(()=>{class e{constructor(e){this.toast=e}showToast(e){this.myToast=this.toast.create({message:e,duration:2e3,position:"top",cssClass:"message"}).then(e=>{console.log(e),e.present()})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(i.yF))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);