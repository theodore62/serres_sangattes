(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[1340],{1340:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AjouterVarieterPageModule:()=>q});var o=i(8583),n=i(665),r=i(2859),s=i(4617),a=i(4762),l=i(7716),c=i(7318),u=i(5090),g=i(6086),h=i(8049),d=i(1792);let m=(()=>{class t{constructor(t,e){this.firestore=t,this.afSG=e,this.ref="Variete",this.varieteList=this.firestore.collection("Variete")}getVarieteList(){return this.varieteList.valueChanges().pipe((0,h.P)()).toPromise()}postPlanteList(t){return this.varieteList.add(t)}deleteVariete(t){return this.varieteList.doc("/"+t).delete()}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(u.ST),l.LFG(d.Q1))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function f(t,e){1&t&&(l.TgZ(0,"span",15),l._uU(1," champ obligatoire "),l.qZA())}function p(t,e){1&t&&(l.TgZ(0,"span",15),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function Z(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-content"),l.TgZ(1,"ion-item"),l.TgZ(2,"ion-label",10),l._uU(3,"Ajouter une Vari\xe9t\xe9"),l.qZA(),l.qZA(),l.TgZ(4,"form",11),l.NdJ("ngSubmit",function(){return l.CHM(t),l.oxw().addVarieter()}),l.TgZ(5,"ion-item"),l.TgZ(6,"ion-label",2),l._uU(7,"nom de la Vari\xe9t\xe9:"),l.qZA(),l._UZ(8,"ion-input",12),l.YNc(9,f,2,0,"span",13),l.YNc(10,p,2,0,"span",13),l.qZA(),l.TgZ(11,"ion-button",14),l._uU(12,"Valider"),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(4),l.Q6J("formGroup",t.varieterFrom),l.xp6(5),l.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.nom.errors?null:t.errorControl.nom.errors.required)),l.xp6(1),l.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.nom.errors?null:t.errorControl.nom.errors.minlength))}}function v(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-list"),l.TgZ(1,"ion-item-sliding"),l.TgZ(2,"ion-item"),l.TgZ(3,"ion-label",2),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"ion-item-options",20),l.TgZ(6,"ion-item-option",21),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw(2).delete(e.id)}),l._UZ(7,"ion-icon",22),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit;l.xp6(4),l.Oqu(t.nom)}}function b(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-content"),l.TgZ(1,"ion-item"),l.TgZ(2,"ion-label",16),l._uU(3,"Supprimer une Vari\xe9t\xe9"),l.qZA(),l.qZA(),l.TgZ(4,"ion-item"),l.TgZ(5,"ion-searchbar",17),l.NdJ("ionChange",function(e){return l.CHM(t),l.oxw().filterList(e)}),l.qZA(),l.qZA(),l.TgZ(6,"ion-refresher",18),l.NdJ("ionRefresh",function(e){return l.CHM(t),l.oxw().doRefresh(e)}),l._UZ(7,"ion-refresher-content"),l.qZA(),l.YNc(8,v,8,1,"ion-list",19),l.qZA()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("ngForOf",t.varieteList)}}const T=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,r,s){this.router=t,this.alertController=e,this.formBuilder=i,this.afDB=o,this.firestore=n,this.toastCtrl=r,this.varieteService=s,this.isSubmitted=!1,this.tableauVariete=[],this.variete={id:"",nom:""}}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){null==this.affichage&&(this.affichage="liste"),this.varieterFrom=this.formBuilder.group({nom:["",[n.kI.required,n.kI.minLength(2)]]}),this.varieteList=yield this.initializeItems()})}segmentChanged(t){this.affichage=t.detail.value}get errorControl(){return this.varieterFrom.controls}addVarieter(){this.varieterFrom.valid?(this.variete.nom=this.varieterFrom.value.nom,this.varieteService.postPlanteList(this.variete).then(t=>{null==t.id?(this.message="les donn\xe9es n'ont pas pu \xeatre enregistr\xe9es",this.toastCtrl.showToast(this.message)):this.firestore.doc(`Variete/${t.id}`).set({id:t.id,nom:this.varieterFrom.value.nom})})):(this.message="enter une valeur dans le champ",this.toastCtrl.showToast(this.message))}filterList(t){return(0,a.mG)(this,void 0,void 0,function*(){this.varieteList=yield this.initializeItems();const e=t.srcElement.value;e&&(this.varieteList=this.varieteList.filter(t=>{if(t.nom&&e)return t.nom.toLowerCase().indexOf(e.toLowerCase())>-1}))})}doRefresh(t){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.initializeItems();console.log("Begin async operation"),setTimeout(()=>{this.varieteList=e,console.log("Async operation has ended"),t.target.complete()},2e3)})}initializeItems(){return(0,a.mG)(this,void 0,void 0,function*(){return this.tableauVariete=[],this.tableauVariete=yield this.varieteService.getVarieteList(),console.log(this.tableauVariete),this.tableauVariete})}delete(t){return(0,a.mG)(this,void 0,void 0,function*(){console.log(t),this.varieteService.deleteVariete(t),this.tableauVariete=[],this.varieteList=yield this.initializeItems()})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(s.F0),l.Y36(r.Br),l.Y36(n.qu),l.Y36(c.KQ),l.Y36(u.ST),l.Y36(g.a),l.Y36(m))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-ajouter-varieter"]],decls:18,vars:2,consts:[[1,"header"],["slot","start"],["color","light"],["slot","end"],["value","liste",3,"ionChange"],["value","ajouter"],["name","add-circle-outline","size","small"],["value","liste"],["name","list-outline","size","small"],[4,"ngIf"],["color","light",1,"ajouter"],["color","light",3,"formGroup","ngSubmit"],["color","light","type","text","placeholder","Vari\xe9t\xe9","formControlName","nom"],["class","error ion-padding","color","light","class","color",4,"ngIf"],["type","submit","expand","block"],["color","light",1,"color"],["color","light",1,"supprimer"],["placeholder","recherche",3,"ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.TgZ(4,"ion-buttons",3),l._UZ(5,"ion-menu-button",2),l.qZA(),l.TgZ(6,"ion-title",2),l._uU(7,"La gestion des Vari\xe9t\xe9s"),l.qZA(),l.qZA(),l.TgZ(8,"ion-toolbar"),l.TgZ(9,"ion-segment",4),l.NdJ("ionChange",function(t){return e.segmentChanged(t)}),l.TgZ(10,"ion-segment-button",5),l.TgZ(11,"ion-label"),l._UZ(12,"ion-icon",6),l.qZA(),l.qZA(),l.TgZ(13,"ion-segment-button",7),l.TgZ(14,"ion-label"),l._UZ(15,"ion-icon",8),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(16,Z,13,3,"ion-content",9),l.YNc(17,b,9,1,"ion-content",9)),2&t&&(l.xp6(16),l.Q6J("ngIf","ajouter"===e.affichage),l.xp6(1),l.Q6J("ngIf","ajouter"!==e.affichage))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.fG,r.wd,r.cJ,r.QI,r.GO,r.Q$,r.gu,o.O5,r.W2,r.Ie,n._Y,n.JL,n.sg,r.pK,r.j9,n.JJ,n.u,r.YG,r.VI,r.nJ,r.Wo,o.sg,r.q_,r.td,r.IK,r.u8],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#4070a6}ion-item[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.ajouter[_ngcontent-%COMP%]{font-size:larger;padding:.5em;text-align:center}.bar[_ngcontent-%COMP%]{border-top:25px green!important}.supprimer[_ngcontent-%COMP%]{font-size:larger;padding:.5em;margin-top:2em;text-align:center}"]}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[s.Bz.forChild(T)],s.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.ez,n.u5,n.UX,r.Pc,C]]}),t})()},6086:(t,e,i)=>{"use strict";i.d(e,{a:()=>r});var o=i(7716),n=i(2859);let r=(()=>{class t{constructor(t){this.toast=t}showToast(t){this.myToast=this.toast.create({message:t,duration:2e3,position:"top",cssClass:"message"}).then(t=>{console.log(t),t.present()})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(n.yF))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);