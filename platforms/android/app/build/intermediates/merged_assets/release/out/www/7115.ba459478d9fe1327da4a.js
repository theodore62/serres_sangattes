(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[7115],{7115:(e,n,o)=>{"use strict";o.r(n),o.d(n,{GestionCommandesPageModule:()=>J});var i=o(8583),t=o(665),r=o(2859),l=o(174),s=o(4762),a=o(9660),m=o(7716),u=o(6086),c=o(151),d=o(5090);function g(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," champ obligatoire "),m.qZA())}function p(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," minimun 2 caract\xe9res "),m.qZA())}function f(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," champ obligatoire "),m.qZA())}function h(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," minimun 2 caract\xe9res "),m.qZA())}function C(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," champ obligatoire "),m.qZA())}function Z(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," minimun 2 caract\xe9res "),m.qZA())}function q(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," champ obligatoire "),m.qZA())}function b(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," minimun 2 caract\xe9res "),m.qZA())}function A(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," champ obligatoire "),m.qZA())}function T(e,n){1&e&&(m.TgZ(0,"span",17),m._uU(1," minimun 2 caract\xe9res "),m.qZA())}function _(e,n){if(1&e){const e=m.EpF();m.TgZ(0,"ion-list",6),m.TgZ(1,"ion-label",7),m._uU(2,"Ajouter une Commande:"),m.qZA(),m.TgZ(3,"form",8),m.NdJ("ngSubmit",function(){return m.CHM(e),m.oxw().ajouter()}),m.TgZ(4,"ion-item"),m.TgZ(5,"ion-label",9),m._uU(6,"nom du client:"),m.qZA(),m._UZ(7,"ion-input",10),m.YNc(8,g,2,0,"span",11),m.YNc(9,p,2,0,"span",11),m.qZA(),m.TgZ(10,"ion-item"),m.TgZ(11,"ion-label",9),m._uU(12,"Nom de la plante :"),m.qZA(),m._UZ(13,"ion-input",12),m.YNc(14,f,2,0,"span",11),m.YNc(15,h,2,0,"span",11),m.qZA(),m.TgZ(16,"ion-item"),m.TgZ(17,"ion-label",9),m._uU(18,"prix :"),m.qZA(),m._UZ(19,"ion-input",13),m.YNc(20,C,2,0,"span",11),m.YNc(21,Z,2,0,"span",11),m.qZA(),m.TgZ(22,"ion-item"),m.TgZ(23,"ion-label",9),m._uU(24,"quantit\xe9 :"),m.qZA(),m._UZ(25,"ion-input",14),m.YNc(26,q,2,0,"span",11),m.YNc(27,b,2,0,"span",11),m.qZA(),m.TgZ(28,"ion-item"),m.TgZ(29,"ion-label",9),m._uU(30,"info compl\xe9mentaire :"),m.qZA(),m._UZ(31,"ion-textarea",15),m.YNc(32,A,2,0,"span",11),m.YNc(33,T,2,0,"span",11),m.qZA(),m.TgZ(34,"ion-button",16),m._uU(35,"Valider"),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("formGroup",e.formulaireCommande),m.xp6(5),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.client.errors?null:e.errorControl.client.errors.required)),m.xp6(1),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.client.errors?null:e.errorControl.client.errors.minlength)),m.xp6(5),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.nom.errors?null:e.errorControl.nom.errors.required)),m.xp6(1),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.nom.errors?null:e.errorControl.nom.errors.minlength)),m.xp6(5),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.prix.errors?null:e.errorControl.prix.errors.required)),m.xp6(1),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.prix.errors?null:e.errorControl.prix.errors.minlength)),m.xp6(5),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.quantite.errors?null:e.errorControl.quantite.errors.required)),m.xp6(1),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.quantite.errors?null:e.errorControl.quantite.errors.minlength)),m.xp6(5),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.infoComplementaire.errors?null:e.errorControl.infoComplementaire.errors.required)),m.xp6(1),m.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.infoComplementaire.errors?null:e.errorControl.infoComplementaire.errors.minlength))}}function x(e,n){if(1&e){const e=m.EpF();m.TgZ(0,"ion-list"),m.TgZ(1,"ion-item-sliding"),m.TgZ(2,"ion-item"),m.TgZ(3,"ion-label",9),m._uU(4),m.qZA(),m.qZA(),m.TgZ(5,"ion-item-options",21),m.TgZ(6,"ion-item-option",22),m.NdJ("click",function(){const n=m.CHM(e).$implicit;return m.oxw(2).delete(n.id)}),m._UZ(7,"ion-icon",23),m.qZA(),m.TgZ(8,"ion-item-option",22),m.NdJ("click",function(){const n=m.CHM(e).$implicit;return m.oxw(2).update(n.id)}),m._UZ(9,"img",24),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=n.$implicit;m.xp6(4),m.hij(" Nom du client: ",e.client,"")}}function v(e,n){if(1&e){const e=m.EpF();m.TgZ(0,"ion-list",6),m.TgZ(1,"ion-label",7),m._uU(2,"Liste des commandes:"),m.qZA(),m.TgZ(3,"ion-item"),m.TgZ(4,"ion-searchbar",18),m.NdJ("ionChange",function(n){return m.CHM(e),m.oxw().filterList(n)}),m.qZA(),m.qZA(),m.TgZ(5,"ion-refresher",19),m.NdJ("ionRefresh",function(n){return m.CHM(e),m.oxw().doRefresh(n)}),m._UZ(6,"ion-refresher-content"),m.qZA(),m.YNc(7,x,10,1,"ion-list",20),m.qZA()}if(2&e){const e=m.oxw();m.xp6(7),m.Q6J("ngForOf",e.listCommandes)}}const I=[{path:"",component:(()=>{class e{constructor(e,n,o,i,t){this.formBuilder=e,this.toastCtrl=n,this.commandeService=o,this.firestore=i,this.modalController=t,this.isSubmitted=!1,this.tableauCommandes=[],this.commande={id:"",nom:"",client:"",prix:"",quantite:"",infoComplementaire:""}}get errorControl(){return this.formulaireCommande.controls}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){null==this.affichage&&(this.affichage="liste"),this.listCommandes=yield this.initializeItems(),this.formulaireCommande=this.formBuilder.group({nom:["",[t.kI.required,t.kI.minLength(2)]],client:["",[t.kI.required]],prix:["",[t.kI.required]],quantite:["",[t.kI.required]],infoComplementaire:["",[t.kI.required]]})})}segmentChanged(e){this.affichage=e.detail.value}ajouter(){this.formulaireCommande.valid?(this.commande.client=this.formulaireCommande.value.client,this.commande.nom=this.formulaireCommande.value.nom,this.commande.prix=this.formulaireCommande.value.prix,this.commande.quantite=this.formulaireCommande.value.quantite,this.commande.infoComplementaire=this.formulaireCommande.value.infoComplementaire,this.commandeService.postCommande(this.commande).then(e=>{null==e.id?(this.message="les donn\xe9es n'ont pas pu \xeatre enregistr\xe9es",this.toastCtrl.showToast(this.message)):this.firestore.doc(`Commandes/${e.id}`).set({id:e.id,nom:this.formulaireCommande.value.nom,client:this.formulaireCommande.value.client,prix:this.formulaireCommande.value.prix,quantite:this.formulaireCommande.value.quantite,infoComplementaire:this.formulaireCommande.value.infoComplementaire})})):(this.message="Veuillez compl\xe9ter le formulaire",this.toastCtrl.showToast(this.message))}filterList(e){return(0,s.mG)(this,void 0,void 0,function*(){this.listCommandes=yield this.initializeItems();const n=e.srcElement.value;n&&(this.listCommandes=this.listCommandes.filter(e=>{if(e.client&&n)return e.client.toLowerCase().indexOf(n.toLowerCase())>-1||e.nom.toLowerCase().indexOf(n.toLowerCase())>-1}))})}doRefresh(e){return(0,s.mG)(this,void 0,void 0,function*(){const n=yield this.initializeItems();console.log("Begin async operation"),setTimeout(()=>{this.listCommandes=n,console.log("Async operation has ended"),e.target.complete()},2e3)})}initializeItems(){return(0,s.mG)(this,void 0,void 0,function*(){return this.tableauCommandes=[],this.tableauCommandes=yield this.commandeService.getCommandesList(),console.log(this.tableauCommandes),this.tableauCommandes})}delete(e){return(0,s.mG)(this,void 0,void 0,function*(){console.log(e),this.commandeService.deleteCommande(e),this.tableauCommandes=[],this.listCommandes=yield this.initializeItems()})}update(e){return(0,s.mG)(this,void 0,void 0,function*(){console.log(e);const n=yield this.modalController.create({component:a.P,cssClass:"my-custom-class",componentProps:{data:"commande",idCommande:e}});return yield n.present()})}}return e.\u0275fac=function(n){return new(n||e)(m.Y36(t.qu),m.Y36(u.a),m.Y36(c.I),m.Y36(d.ST),m.Y36(r.IN))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-gestion-commandes"]],decls:15,vars:2,consts:[["value","liste",3,"ionChange"],["value","ajouter"],["name","add-circle-outline","size","small"],["value","liste"],["name","list-outline","size","small"],["class","titreAjouter",4,"ngIf"],[1,"titreAjouter"],["color","light",1,"titreAjouter"],[3,"formGroup","ngSubmit"],["color","light"],["color","light","type","text","placeholder","client","required","","formControlName","client"],["class","error ion-padding",4,"ngIf"],["color","light","type","text","placeholder","nom","formControlName","nom"],["color","light","type","number","placeholder","prix","formControlName","prix"],["color","light","type","number","placeholder","quantit\xe9","formControlName","quantite"],["color","light","rows","6","cols","20","placeholder","info compl\xe9mentaire","required","","formControlName","infoComplementaire"],["type","submit","expand","block"],[1,"error","ion-padding"],["placeholder","recherche",3,"ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"],["src","https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png"]],template:function(e,n){1&e&&(m.TgZ(0,"ion-header"),m.TgZ(1,"ion-toolbar"),m.TgZ(2,"ion-title"),m._uU(3,"gestion de Commandes"),m.qZA(),m.qZA(),m.TgZ(4,"ion-toolbar"),m.TgZ(5,"ion-segment",0),m.NdJ("ionChange",function(e){return n.segmentChanged(e)}),m.TgZ(6,"ion-segment-button",1),m.TgZ(7,"ion-label"),m._UZ(8,"ion-icon",2),m.qZA(),m.qZA(),m.TgZ(9,"ion-segment-button",3),m.TgZ(10,"ion-label"),m._UZ(11,"ion-icon",4),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"ion-content"),m.YNc(13,_,36,11,"ion-list",5),m.YNc(14,v,8,1,"ion-list",5),m.qZA()),2&e&&(m.xp6(13),m.Q6J("ngIf","ajouter"===n.affichage),m.xp6(1),m.Q6J("ngIf","liste"===n.affichage))},directives:[r.Gu,r.sr,r.wd,r.cJ,r.QI,r.GO,r.Q$,r.gu,r.W2,i.O5,r.q_,t._Y,t.JL,t.sg,r.Ie,r.pK,r.j9,t.Q7,t.JJ,t.u,r.as,r.g2,r.YG,r.VI,r.nJ,r.Wo,i.sg,r.td,r.IK,r.u8],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%], ion-searchbar[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#6c91bb}ion-item[_ngcontent-%COMP%], ion-item-option[_ngcontent-%COMP%], ion-item-options[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.titreAjouter[_ngcontent-%COMP%]{text-align:center;size:40%}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[l.Bz.forChild(I)],l.Bz]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[i.ez,t.u5,t.UX,r.Pc,U]]}),e})()}}]);