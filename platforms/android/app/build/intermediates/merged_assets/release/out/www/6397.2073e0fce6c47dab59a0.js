(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[6397],{6397:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DetailsClientPageModule:()=>O});var o=n(8583),i=n(665),r=n(2859),s=n(4617),l=n(4762),a=n(7716),c=n(1792),m=n(9842),u=n(151),d=n(1811),g=n(4267),p=n(5090),h=n(6086),f=n(2468);function Z(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," champ obligatoire "),a.qZA())}function C(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function b(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," champ obligatoire "),a.qZA())}function A(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function q(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," champ obligatoire "),a.qZA())}function T(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function v(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," champ obligatoire "),a.qZA())}function _(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function x(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," champ obligatoire "),a.qZA())}function I(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function U(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," champ obligatoire "),a.qZA())}function y(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function L(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," champ obligatoire "),a.qZA())}function N(e,t){1&e&&(a.TgZ(0,"span",21),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function Y(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-content",8),a.TgZ(1,"ion-item",9),a.TgZ(2,"ion-label",10),a._uU(3,"D\xe9tails du client:"),a.qZA(),a.qZA(),a.TgZ(4,"form",11),a.NdJ("ngSubmit",function(){return a.CHM(e),a.oxw().updateClient()}),a.TgZ(5,"ion-item"),a.TgZ(6,"ion-label",10),a._uU(7,"nom:"),a.qZA(),a._UZ(8,"ion-input",12),a.YNc(9,Z,2,0,"span",13),a.YNc(10,C,2,0,"span",13),a.qZA(),a.TgZ(11,"ion-item"),a.TgZ(12,"ion-label",10),a._uU(13,"Pr\xe9nom:"),a.qZA(),a._UZ(14,"ion-input",14),a.YNc(15,b,2,0,"span",13),a.YNc(16,A,2,0,"span",13),a.qZA(),a.TgZ(17,"ion-item"),a.TgZ(18,"ion-label",10),a._uU(19,"Email:"),a.qZA(),a._UZ(20,"ion-input",15),a.YNc(21,q,2,0,"span",13),a.YNc(22,T,2,0,"span",13),a.qZA(),a.TgZ(23,"ion-item"),a.TgZ(24,"ion-label",10),a._uU(25,"T\xe9l\xe9phone fixe:"),a.qZA(),a._UZ(26,"ion-input",16),a.YNc(27,v,2,0,"span",13),a.YNc(28,_,2,0,"span",13),a.qZA(),a.TgZ(29,"ion-item"),a.TgZ(30,"ion-label",10),a._uU(31,"T\xe9l\xe9phone portable:"),a.qZA(),a._UZ(32,"ion-input",17),a.YNc(33,x,2,0,"span",13),a.YNc(34,I,2,0,"span",13),a.qZA(),a.TgZ(35,"ion-item"),a.TgZ(36,"ion-label",10),a._uU(37,"Adresse:"),a.qZA(),a._UZ(38,"ion-input",18),a.YNc(39,U,2,0,"span",13),a.YNc(40,y,2,0,"span",13),a.qZA(),a.TgZ(41,"ion-item"),a.TgZ(42,"ion-label",10),a._uU(43,"Code postal:"),a.qZA(),a._UZ(44,"ion-input",19),a.YNc(45,L,2,0,"span",13),a.YNc(46,N,2,0,"span",13),a.qZA(),a.TgZ(47,"ion-button",20),a._uU(48,"Valider"),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Q6J("formGroup",e.formulaireClient),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.nom.errors?null:e.errorControl.nom.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.nom.errors?null:e.errorControl.nom.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.prenom.errors?null:e.errorControl.prenom.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.prenom.errors?null:e.errorControl.prenom.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.email.errors?null:e.errorControl.email.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.email.errors?null:e.errorControl.email.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.fixe.errors?null:e.errorControl.fixe.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.fixe.errors?null:e.errorControl.fixe.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.portable.errors?null:e.errorControl.portable.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.portable.errors?null:e.errorControl.portable.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.adresse.errors?null:e.errorControl.adresse.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.adresse.errors?null:e.errorControl.adresse.errors.minlength)),a.xp6(5),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.postal.errors?null:e.errorControl.postal.errors.required)),a.xp6(1),a.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.postal.errors?null:e.errorControl.postal.errors.minlength))}}function J(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-item-sliding"),a.TgZ(1,"ion-item"),a.TgZ(2,"ion-label",10),a._uU(3),a.qZA(),a.TgZ(4,"ion-label",10),a._uU(5),a.ALo(6,"date"),a.qZA(),a.qZA(),a.TgZ(7,"ion-item-options",27),a.TgZ(8,"ion-item-option",28),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).delete(t.id)}),a._UZ(9,"ion-icon",29),a.qZA(),a.TgZ(10,"ion-item-option",28),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).update(t.id,t.client)}),a._UZ(11,"img",30),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw().$implicit;a.xp6(3),a.hij("N\xb0",e.numero,""),a.xp6(2),a.hij("Date: ",a.xi3(6,2,e.date,"dd/MM/yyyy"),"")}}function S(e,t){if(1&e&&(a.TgZ(0,"ion-list",23),a.YNc(1,J,12,5,"ion-item-sliding",26),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("ngIf",!e.archive)}}function k(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-item-sliding"),a.TgZ(1,"ion-item"),a.TgZ(2,"ion-label",10),a._uU(3),a.qZA(),a.TgZ(4,"ion-label",10),a._uU(5),a.ALo(6,"date"),a.qZA(),a.qZA(),a.TgZ(7,"ion-item-options",27),a.TgZ(8,"ion-item-option",28),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).delete(t.id)}),a._UZ(9,"ion-icon",29),a.qZA(),a.TgZ(10,"ion-item-option",28),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).update(t.id,t.client)}),a._UZ(11,"img",30),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw().$implicit;a.xp6(3),a.hij("N\xb0",e.numero,""),a.xp6(2),a.hij("Date: ",a.xi3(6,2,e.date,"dd/MM/yyyy"),"")}}function w(e,t){if(1&e&&(a.TgZ(0,"ion-list",23),a.YNc(1,k,12,5,"ion-item-sliding",26),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("ngIf",e.archive)}}function Q(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-content",8),a.TgZ(1,"ion-refresher",22),a.NdJ("ionRefresh",function(t){return a.CHM(e),a.oxw().doRefresh(t)}),a._UZ(2,"ion-refresher-content"),a.qZA(),a.TgZ(3,"ion-item",23),a.TgZ(4,"ion-label",10),a._uU(5," Liste des commandes"),a.qZA(),a.qZA(),a.TgZ(6,"ion-item"),a.TgZ(7,"ion-searchbar",24),a.NdJ("ionChange",function(t){return a.CHM(e),a.oxw().filterList(t)}),a.qZA(),a.qZA(),a.TgZ(8,"ion-item",23),a.TgZ(9,"ion-label",10),a._uU(10," Liste des commandes en cour"),a.qZA(),a.qZA(),a.YNc(11,S,2,1,"ion-list",25),a.TgZ(12,"ion-item",23),a.TgZ(13,"ion-label",10),a._uU(14," Liste des commandes archiv\xe9es"),a.qZA(),a.qZA(),a.YNc(15,w,2,1,"ion-list",25),a.qZA()}if(2&e){const e=a.oxw();a.xp6(11),a.Q6J("ngForOf",e.commandesList),a.xp6(4),a.Q6J("ngForOf",e.commandesList)}}const M=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i,r,s,l,a,c,m,u,d){this.alertController=e,this.afSG=t,this.plantesService=n,this.commandeService=o,this.clientService=i,this.modalController=r,this.formBuilder=s,this.camera=l,this.firestore=a,this.loadingController=c,this.toastCtrl=m,this.router=u,this.dataService=d,this.clientDetail=[],this.isSubmitted=!1,this.tableauCommandes=[]}get errorControl(){return this.formulaireClient.controls}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this.idClient=this.dataService.getData("idClient"),this.commandesList=yield this.initializeCommandes(),void 0===this.affichage&&(this.affichage="ajouter"),console.log(this.commandesList),this.formulaireClient=this.formBuilder.group({nom:["",[i.kI.required,i.kI.minLength(2)]],prenom:["",[i.kI.required,i.kI.minLength(2)]],email:["",[i.kI.required,i.kI.minLength(2),i.kI.email]],fixe:["",[i.kI.maxLength(10)]],portable:["",[i.kI.required,i.kI.maxLength(10)]],adresse:["",[i.kI.required,i.kI.minLength(2)]],postal:["",[i.kI.required,i.kI.maxLength(5)]]}),this.clientService.getClient(this.idClient).then(e=>{this.clientDetail.push(e),this.clientDetail.forEach(e=>{document.getElementById("nom").setAttribute("value",e.nom),document.getElementById("prenom").setAttribute("value",e.prenom),document.getElementById("email").setAttribute("value",e.email),document.getElementById("fixe").setAttribute("value",e.fixe),document.getElementById("portable").setAttribute("value",e.portable),document.getElementById("adresse").setAttribute("value",e.adresse),document.getElementById("postal").setAttribute("value",e.postal)})})})}updateClient(){return(0,l.mG)(this,void 0,void 0,function*(){if(!this.formulaireClient.valid)return this.message="enter une valeur dans le champ",this.toastCtrl.showToast(this.message),!1;this.clientService.updateClient(this.idClient,this.formulaireClient.value),this.message="La ou les modification(s) on ou \xe0 bien \xe9tait \xe9ffectuer",this.toastCtrl.showToast(this.message)})}segmentChanged(e){this.affichage=e.detail.value}initializeCommandes(){return(0,l.mG)(this,void 0,void 0,function*(){this.tableauCommandes=[];let e=[];return e=yield this.commandeService.getCommandesList(),e.forEach(e=>{e.client===this.idClient&&(console.log(e),this.tableauCommandes.push(e))}),this.tableauCommandes})}delete(e){return(0,l.mG)(this,void 0,void 0,function*(){console.log(e),this.commandeService.deleteCommande(e),this.tableauCommandes=[],this.tableauCommandes=yield this.initializeCommandes()})}update(e,t){return(0,l.mG)(this,void 0,void 0,function*(){this.dataService.setData("id",{idCommande:e,idClient:t}),this.router.navigateByUrl("details-commande")})}doRefresh(e){return(0,l.mG)(this,void 0,void 0,function*(){const t=yield this.initializeCommandes();setTimeout(()=>{this.commandesList=t,e.target.complete()},2e3)})}filterList(e){return(0,l.mG)(this,void 0,void 0,function*(){this.commandesList=yield this.initializeCommandes();const t=e.srcElement.value;t&&(this.commandesList=this.commandesList.filter(e=>{if(e.numero&&t)return e.numero.toLowerCase().indexOf(t.toLowerCase())>-1||e.date.toLowerCase().indexOf(t.toLowerCase())>-1}))})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(r.Br),a.Y36(c.Q1),a.Y36(m.B),a.Y36(u.I),a.Y36(d.y),a.Y36(r.IN),a.Y36(i.qu),a.Y36(g.V1),a.Y36(p.ST),a.Y36(r.HT),a.Y36(h.a),a.Y36(s.F0),a.Y36(f.D))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-details-client"]],decls:16,vars:2,consts:[["slot","start"],[1,"segement"],["value","ajouter",3,"ionChange"],["value","ajouter"],["name","person-outline","size","small"],["value","liste"],["name","list-outline","size","small"],["class","client",4,"ngIf"],[1,"client"],[1,"titre"],["color","light"],["color","light",3,"formGroup","ngSubmit"],["color","light","type","text","placeholder","nom","id","nom","formControlName","nom"],["class","error ion-padding","color","light","class","color",4,"ngIf"],["color","light","type","text","placeholder","prenom","id","prenom","formControlName","prenom"],["color","light","type","email","placeholder","email","id","email","formControlName","email"],["color","light","type","number","placeholder","fixe","id","fixe","formControlName","fixe"],["color","light","type","number","placeholder","portable","id","portable","formControlName","portable"],["color","light","type","text","placeholder","adresse","id","adresse","formControlName","adresse"],["color","light","type","number","placeholder","postal","id","postal","formControlName","postal"],["type","submit","expand","block"],["color","light",1,"color"],["slot","fixed",3,"ionRefresh"],[1,"titreAjouter"],["placeholder","recherche",3,"ionChange"],["class","titreAjouter",4,"ngFor","ngForOf"],[4,"ngIf"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"],["src","https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-back-button"),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5,"d\xe9tail s\xfbr le client"),a.qZA(),a.qZA(),a.TgZ(6,"ion-toolbar",1),a.TgZ(7,"ion-segment",2),a.NdJ("ionChange",function(e){return t.segmentChanged(e)}),a.TgZ(8,"ion-segment-button",3),a.TgZ(9,"ion-label"),a._UZ(10,"ion-icon",4),a.qZA(),a.qZA(),a.TgZ(11,"ion-segment-button",5),a.TgZ(12,"ion-label"),a._UZ(13,"ion-icon",6),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(14,Y,49,15,"ion-content",7),a.YNc(15,Q,16,2,"ion-content",7)),2&e&&(a.xp6(14),a.Q6J("ngIf","ajouter"===t.affichage),a.xp6(1),a.Q6J("ngIf","liste"===t.affichage))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.cJ,r.QI,r.GO,r.Q$,r.gu,o.O5,r.W2,r.Ie,i._Y,i.JL,i.sg,r.pK,r.j9,i.JJ,i.u,r.as,r.YG,r.nJ,r.Wo,r.VI,o.sg,r.q_,r.td,r.IK,r.u8],pipes:[o.uU],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-button[_ngcontent-%COMP%]{--background:#6c91bb}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}#map_canvas[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], ion-item-options[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.titreAjouter[_ngcontent-%COMP%]{text-align:center;size:40%}#map_canvas[_ngcontent-%COMP%]{--ion-background-color:linear-gradient(#3366a0,#9eb7d2)!important}"]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.Bz.forChild(M)],s.Bz]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.ez,i.u5,r.Pc,i.UX,P]]}),e})()},1811:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var o=n(8049),i=n(7716),r=n(5090),s=n(1792);let l=(()=>{class e{constructor(e,t){this.firestore=e,this.afSG=t,this.ref="Client",this.client=this.firestore.collection("Client")}getListClients(){return this.client.valueChanges()}getClientsList(){return this.client.valueChanges().pipe((0,o.P)()).toPromise()}postClient(e){return this.client.add(e)}getClient(e){return this.client.doc("/"+e).valueChanges().pipe((0,o.P)()).toPromise()}updateClient(e,t){this.client.doc("/"+e).update(t)}deleteClient(e){return this.client.doc("/"+e).delete()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.ST),i.LFG(s.Q1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},151:(e,t,n)=>{"use strict";n.d(t,{I:()=>l});var o=n(8049),i=n(7716),r=n(5090),s=n(1792);let l=(()=>{class e{constructor(e,t){this.firestore=e,this.afSG=t,this.ref="Commandes",this.commande=this.firestore.collection("Commandes")}getListCommandes(){return this.commande.valueChanges()}getCommandesList(){return this.commande.valueChanges().pipe((0,o.P)()).toPromise()}postCommande(e){return this.commande.add(e)}getDetailCommande(e){return this.commande.doc("/"+e).valueChanges().pipe((0,o.P)()).toPromise()}updateCommande(e,t){this.commande.doc("/"+e).update(t)}deleteCommande(e){return this.commande.doc("/"+e).delete()}updateArchive(e,t){this.commande.doc("/"+e).set(t)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.ST),i.LFG(s.Q1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6086:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var o=n(7716),i=n(2859);let r=(()=>{class e{constructor(e){this.toast=e}showToast(e){this.myToast=this.toast.create({message:e,duration:2e3,position:"top",cssClass:"message"}).then(e=>{console.log(e),e.present()})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(i.yF))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);