(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[2676],{2676:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FruitsPageModule:()=>C});var i=n(8583),o=n(665),s=n(2859),r=n(4617),a=n(4762),c=n(9660),l=n(7716),u=n(5090),d=n(2468),g=n(9842),h=n(1792);function p(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-list",4),l.TgZ(1,"ion-item-sliding"),l.TgZ(2,"ion-item",5),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw().detail(e.id)}),l.TgZ(3,"ion-thumbnail",0),l._UZ(4,"ion-img",6),l.qZA(),l.TgZ(5,"ion-label"),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"ion-item-options",7),l.TgZ(8,"ion-item-option",8),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw().delete(e.id,e.image)}),l._UZ(9,"ion-icon",9),l.qZA(),l.TgZ(10,"ion-item-option",8),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw().update(e.id,e.fleuraison)}),l._UZ(11,"img",10),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit;l.xp6(4),l.Q6J("src",t.image),l.xp6(2),l.Oqu(t.nom)}}const m=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,s,r,a){this.firestore=t,this.dataService=e,this.router=n,this.plantesService=i,this.afSG=o,this.alertController=s,this.modalController=r,this.routerOutlet=a,this.tableauPlante=[]}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){this.datas=this.dataService.getData("data"),this.planteList=yield this.initializeItems()})}doRefresh(t){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.initializeItems();console.log("Begin async operation"),setTimeout(()=>{this.planteList=e,console.log("Async operation has ended"),t.target.complete()},2e3)})}initializeItems(){return(0,a.mG)(this,void 0,void 0,function*(){return this.tableauPlante=[],(yield this.plantesService.getPlanteList()).forEach(t=>{t.fleuraison===this.datas&&"Fruit"===t.type&&(console.log(t.image),this.afSG.ref("/"+t.image).getDownloadURL().subscribe(e=>{t.image=e,this.tableauPlante.push(t)}))}),this.tableauPlante})}filterList(t){return(0,a.mG)(this,void 0,void 0,function*(){this.planteList=yield this.initializeItems();const e=t.srcElement.value;e&&(this.planteList=this.planteList.filter(t=>{if(t.nom&&e)return t.nom.toLowerCase().indexOf(e.toLowerCase())>-1||t.variete.toLowerCase().indexOf(e.toLowerCase())>-1||t.couleur.toLowerCase().indexOf(e.toLowerCase())>-1||t.hauteur.toLowerCase().indexOf(e.toLowerCase())>-1||t.de.toLowerCase().indexOf(e.toLowerCase())>-1}))})}detail(t){this.dataService.setData("id",t),this.router.navigateByUrl("/details")}delete(t,e){return(0,a.mG)(this,void 0,void 0,function*(){this.afSG.refFromURL(e).delete(),this.plantesService.deletePlante(t),this.tableauPlante=[],this.planteList=yield this.initializeItems(),console.log(this.planteList)})}update(t,e){return(0,a.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:c.P,cssClass:"my-custom-class",componentProps:{data:"plante",id:t,fleuraison:e}});return yield n.present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(u.ST),l.Y36(d.D),l.Y36(r.F0),l.Y36(g.B),l.Y36(h.Q1),l.Y36(s.Br),l.Y36(s.IN),l.Y36(s.jP))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-fruits"]],decls:12,vars:1,consts:[["slot","start"],[3,"ionChange"],["slot","fixed",3,"ionRefresh"],["color","light",4,"ngFor","ngForOf"],["color","light"],[3,"click"],[3,"src"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small"],["src","https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l._UZ(3,"ion-back-button"),l.qZA(),l.TgZ(4,"ion-title"),l._uU(5,"Fruits"),l.qZA(),l.qZA(),l.TgZ(6,"ion-toolbar"),l.TgZ(7,"ion-searchbar",1),l.NdJ("ionChange",function(t){return e.filterList(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"ion-content"),l.TgZ(9,"ion-refresher",2),l.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),l._UZ(10,"ion-refresher-content"),l.qZA(),l.YNc(11,p,12,2,"ion-list",3),l.qZA()),2&t&&(l.xp6(11),l.Q6J("ngForOf",e.planteList))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.VI,s.j9,s.W2,s.nJ,s.Wo,i.sg,s.q_,s.td,s.Ie,s.Bs,s.Xz,s.Q$,s.IK,s.u8,s.gu],styles:["[_ngcontent-%COMP%]:root{--ion-safe-area-top:20px;--ion-safe-area-bottom:22px}ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%], ion-searchbar[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#4070a6}ion-item[_ngcontent-%COMP%], ion-item-option[_ngcontent-%COMP%], ion-item-options[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.my-custom-modal[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{height:20%;top:80%;position:absolute;display:block}"]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[r.Bz.forChild(m)],r.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.ez,o.u5,s.Pc,f]]}),t})()}}]);