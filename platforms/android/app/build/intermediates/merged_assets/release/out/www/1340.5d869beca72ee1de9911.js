(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[1340],{1340:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AjouterVarieterPageModule:()=>T});var o=i(8583),r=i(665),n=i(2859),s=i(174),a=i(4762),l=i(7716),c=i(7318),u=i(5090),g=i(6086),d=i(8049),h=i(1792);let m=(()=>{class t{constructor(t,e){this.firestore=t,this.afSG=e,this.ref="Variete",this.varieteList=this.firestore.collection("Variete")}getVarieteList(){return this.varieteList.valueChanges().pipe((0,d.P)()).toPromise()}postPlanteList(t){return this.varieteList.add(t)}deleteVariete(t){return this.varieteList.doc("/"+t).delete()}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(u.ST),l.LFG(h.Q1))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function p(t,e){1&t&&(l.TgZ(0,"span",11),l._uU(1," champ obligatoire "),l.qZA())}function f(t,e){1&t&&(l.TgZ(0,"span",11),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function Z(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-list"),l.TgZ(1,"ion-item-sliding"),l.TgZ(2,"ion-item"),l.TgZ(3,"ion-label",2),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"ion-item-options",12),l.TgZ(6,"ion-item-option",13),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw().delete(e.id)}),l._UZ(7,"ion-icon",14),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit;l.xp6(4),l.Oqu(t.nom)}}const v=[{path:"",component:(()=>{class t{constructor(t,e,i,o,r,n,s){this.router=t,this.alertController=e,this.formBuilder=i,this.afDB=o,this.firestore=r,this.toastCtrl=n,this.varieteService=s,this.isSubmitted=!1,this.tableauVariete=[],this.variete={id:"",nom:""}}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){this.varieterFrom=this.formBuilder.group({nom:["",[r.kI.required,r.kI.minLength(2)]]}),this.varieteList=yield this.initializeItems()})}get errorControl(){return this.varieterFrom.controls}addVarieter(){this.varieterFrom.valid?this.varieteService.postPlanteList(this.variete).then(t=>{null==t.id?(this.message="les donn\xe9es n'ont pas pu \xeatre enregistr\xe9es",this.toastCtrl.showToast(this.message)):this.firestore.doc(`Variete/${t.id}`).set({id:t.id,nom:this.varieterFrom.value.nom})}):(this.variete.nom=this.varieterFrom.value.nom,this.message="enter une valeur dans le champ",this.toastCtrl.showToast(this.message))}doRefresh(t){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.initializeItems();console.log("Begin async operation"),setTimeout(()=>{this.varieteList=e,console.log("Async operation has ended"),t.target.complete()},2e3)})}initializeItems(){return(0,a.mG)(this,void 0,void 0,function*(){return this.tableauVariete=[],this.tableauVariete=yield this.varieteService.getVarieteList(),console.log(this.tableauVariete),this.tableauVariete})}delete(t){return(0,a.mG)(this,void 0,void 0,function*(){console.log(t),this.varieteService.deleteVariete(t),this.tableauVariete=[],this.varieteList=yield this.initializeItems()})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(s.F0),l.Y36(n.Br),l.Y36(r.qu),l.Y36(c.KQ),l.Y36(u.ST),l.Y36(g.a),l.Y36(m))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-ajouter-varieter"]],decls:25,vars:4,consts:[[1,"header"],["slot","start"],["color","light"],["color","light",1,"ajouter"],["color","light",3,"formGroup","ngSubmit"],["color","light","type","text","placeholder","Vari\xe9t\xe9","formControlName","nom"],["class","error ion-padding","color","light","class","color",4,"ngIf"],["type","submit","expand","block"],["color","light",1,"supprimer"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],["color","light",1,"color"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.TgZ(4,"ion-title",2),l._uU(5,"La gestion des Vari\xe9t\xe9s"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"ion-content"),l.TgZ(7,"ion-item"),l.TgZ(8,"ion-label",3),l._uU(9,"Ajouter une Vari\xe9t\xe9"),l.qZA(),l.qZA(),l.TgZ(10,"form",4),l.NdJ("ngSubmit",function(){return e.addVarieter()}),l.TgZ(11,"ion-item"),l.TgZ(12,"ion-label",2),l._uU(13,"nom de la Vari\xe9t\xe9:"),l.qZA(),l._UZ(14,"ion-input",5),l.YNc(15,p,2,0,"span",6),l.YNc(16,f,2,0,"span",6),l.qZA(),l.TgZ(17,"ion-button",7),l._uU(18,"Valider"),l.qZA(),l.qZA(),l.TgZ(19,"ion-item"),l.TgZ(20,"ion-label",8),l._uU(21,"Supprimer une Vari\xe9t\xe9"),l.qZA(),l.qZA(),l.TgZ(22,"ion-refresher",9),l.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),l._UZ(23,"ion-refresher-content"),l.qZA(),l.YNc(24,Z,8,1,"ion-list",10),l.qZA()),2&t&&(l.xp6(10),l.Q6J("formGroup",e.varieterFrom),l.xp6(5),l.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.nom.errors?null:e.errorControl.nom.errors.required)),l.xp6(1),l.Q6J("ngIf",e.isSubmitted&&(null==e.errorControl.nom.errors?null:e.errorControl.nom.errors.minlength)),l.xp6(8),l.Q6J("ngForOf",e.varieteList))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.W2,n.Ie,n.Q$,r._Y,r.JL,r.sg,n.pK,n.j9,r.JJ,r.u,o.O5,n.YG,n.nJ,n.Wo,o.sg,n.q_,n.td,n.IK,n.u8,n.gu],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#4070a6}ion-item[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.ajouter[_ngcontent-%COMP%]{font-size:larger;padding:.5em;text-align:center}.bar[_ngcontent-%COMP%]{border-top:25px green!important}.supprimer[_ngcontent-%COMP%]{font-size:larger;padding:.5em;margin-top:2em;text-align:center}"]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[s.Bz.forChild(v)],s.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.ez,r.u5,r.UX,n.Pc,b]]}),t})()},6086:(t,e,i)=>{"use strict";i.d(e,{a:()=>n});var o=i(7716),r=i(2859);let n=(()=>{class t{constructor(t){this.toast=t}showToast(t){this.myToast=this.toast.create({message:t,duration:2e3,position:"top",cssClass:"message"}).then(t=>{console.log(t),t.present()})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(r.yF))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);