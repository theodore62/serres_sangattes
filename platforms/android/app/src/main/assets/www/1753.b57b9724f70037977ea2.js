(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[1753],{1753:function(t,e,n){"use strict";n.r(e),n.d(e,{AjouterVarieterPageModule:function(){return q}});var i=n(1116),o=n(1462),r=n(4812),s=n(9272),a=n(4762),c=n(5366),u=n(5540),l=n(7617),f=n(5411),g=n(3530),h=n(80),m=function(){function t(t,e){this.firestore=t,this.afSG=e,this.ref="Variete",this.varieteList=this.firestore.collection("Variete")}return t.prototype.getVarieteList=function(){return this.varieteList.valueChanges().pipe((0,g.P)()).toPromise()},t.prototype.postPlanteList=function(t){return this.varieteList.add(t)},t.prototype.deleteVariete=function(t){return this.varieteList.doc("/"+t).delete()},t.\u0275fac=function(e){return new(e||t)(c.LFG(l.ST),c.LFG(h.Q1))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function p(t,e){1&t&&(c.TgZ(0,"span",15),c._uU(1," champ obligatoire "),c.qZA())}function d(t,e){1&t&&(c.TgZ(0,"span",15),c._uU(1," minimun 2 caract\xe9res "),c.qZA())}function v(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"ion-content"),c.TgZ(1,"ion-item"),c.TgZ(2,"ion-label",10),c._uU(3,"Ajouter une Vari\xe9t\xe9"),c.qZA(),c.qZA(),c.TgZ(4,"form",11),c.NdJ("ngSubmit",function(){return c.CHM(n),c.oxw().addVarieter()}),c.TgZ(5,"ion-item"),c.TgZ(6,"ion-label",2),c._uU(7,"nom de la Vari\xe9t\xe9:"),c.qZA(),c._UZ(8,"ion-input",12),c.YNc(9,p,2,0,"span",13),c.YNc(10,d,2,0,"span",13),c.qZA(),c.TgZ(11,"ion-button",14),c._uU(12,"Valider"),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=c.oxw();c.xp6(4),c.Q6J("formGroup",i.varieterFrom),c.xp6(5),c.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.nom.errors?null:i.errorControl.nom.errors.required)),c.xp6(1),c.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.nom.errors?null:i.errorControl.nom.errors.minlength))}}function Z(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"ion-list"),c.TgZ(1,"ion-item-sliding"),c.TgZ(2,"ion-item"),c.TgZ(3,"ion-label",2),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"ion-item-options",20),c.TgZ(6,"ion-item-option",21),c.NdJ("click",function(){var t=c.CHM(n).$implicit;return c.oxw(2).delete(t.id)}),c._UZ(7,"ion-icon",22),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=e.$implicit;c.xp6(4),c.Oqu(i.nom)}}function b(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"ion-content"),c.TgZ(1,"ion-item"),c.TgZ(2,"ion-label",16),c._uU(3,"Supprimer une Vari\xe9t\xe9"),c.qZA(),c.qZA(),c.TgZ(4,"ion-item"),c.TgZ(5,"ion-searchbar",17),c.NdJ("ionChange",function(t){return c.CHM(n),c.oxw().filterList(t)}),c.qZA(),c.qZA(),c.TgZ(6,"ion-refresher",18),c.NdJ("ionRefresh",function(t){return c.CHM(n),c.oxw().doRefresh(t)}),c._UZ(7,"ion-refresher-content"),c.qZA(),c.YNc(8,Z,8,1,"ion-list",19),c.qZA()}if(2&t){var i=c.oxw();c.xp6(8),c.Q6J("ngForOf",i.varieteList)}}var T=[{path:"",component:function(){function t(t,e,n,i,o,r,s){this.router=t,this.alertController=e,this.formBuilder=n,this.afDB=i,this.firestore=o,this.toastCtrl=r,this.varieteService=s,this.isSubmitted=!1,this.tableauVariete=[],this.variete={id:"",nom:""}}return t.prototype.ngOnInit=function(){return(0,a.mG)(this,void 0,void 0,function(){var t;return(0,a.Jh)(this,function(e){switch(e.label){case 0:return null==this.affichage&&(this.affichage="liste"),this.varieterFrom=this.formBuilder.group({nom:["",[o.kI.required,o.kI.minLength(2)]]}),t=this,[4,this.initializeItems()];case 1:return t.varieteList=e.sent(),[2]}})})},t.prototype.segmentChanged=function(t){this.affichage=t.detail.value},Object.defineProperty(t.prototype,"errorControl",{get:function(){return this.varieterFrom.controls},enumerable:!1,configurable:!0}),t.prototype.addVarieter=function(){var t=this;this.varieterFrom.valid?(this.variete.nom=this.varieterFrom.value.nom,this.varieteService.postPlanteList(this.variete).then(function(e){null==e.id?(t.message="les donn\xe9es n'ont pas pu \xeatre enregistr\xe9es",t.toastCtrl.showToast(t.message)):t.firestore.doc("Variete/"+e.id).set({id:e.id,nom:t.varieterFrom.value.nom})})):(this.message="enter une valeur dans le champ",this.toastCtrl.showToast(this.message))},t.prototype.filterList=function(t){return(0,a.mG)(this,void 0,void 0,function(){var e,n;return(0,a.Jh)(this,function(i){switch(i.label){case 0:return e=this,[4,this.initializeItems()];case 1:return e.varieteList=i.sent(),(n=t.srcElement.value)?(this.varieteList=this.varieteList.filter(function(t){if(t.nom&&n)return t.nom.toLowerCase().indexOf(n.toLowerCase())>-1}),[2]):[2]}})})},t.prototype.doRefresh=function(t){return(0,a.mG)(this,void 0,void 0,function(){var e,n=this;return(0,a.Jh)(this,function(i){switch(i.label){case 0:return[4,this.initializeItems()];case 1:return e=i.sent(),console.log("Begin async operation"),setTimeout(function(){n.varieteList=e,console.log("Async operation has ended"),t.target.complete()},2e3),[2]}})})},t.prototype.initializeItems=function(){return(0,a.mG)(this,void 0,void 0,function(){var t;return(0,a.Jh)(this,function(e){switch(e.label){case 0:return this.tableauVariete=[],t=this,[4,this.varieteService.getVarieteList()];case 1:return t.tableauVariete=e.sent(),console.log(this.tableauVariete),[2,this.tableauVariete]}})})},t.prototype.delete=function(t){return(0,a.mG)(this,void 0,void 0,function(){var e;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return console.log(t),this.varieteService.deleteVariete(t),this.tableauVariete=[],e=this,[4,this.initializeItems()];case 1:return e.varieteList=n.sent(),[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Y36(s.F0),c.Y36(r.Br),c.Y36(o.qu),c.Y36(u.KQ),c.Y36(l.ST),c.Y36(f.a),c.Y36(m))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-ajouter-varieter"]],decls:18,vars:2,consts:[[1,"header"],["slot","start"],["color","light"],["slot","end"],["value","liste",3,"ionChange"],["value","ajouter"],["name","add-circle-outline","size","small"],["value","liste"],["name","list-outline","size","small"],[4,"ngIf"],["color","light",1,"ajouter"],["color","light",3,"formGroup","ngSubmit"],["color","light","type","text","placeholder","Vari\xe9t\xe9","formControlName","nom"],["class","error ion-padding","color","light","class","color",4,"ngIf"],["type","submit","expand","block"],["color","light",1,"color"],["color","light",1,"supprimer"],["placeholder","recherche",3,"ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-back-button",2),c.qZA(),c.TgZ(4,"ion-buttons",3),c._UZ(5,"ion-menu-button",2),c.qZA(),c.TgZ(6,"ion-title",2),c._uU(7,"La gestion des Vari\xe9t\xe9s"),c.qZA(),c.qZA(),c.TgZ(8,"ion-toolbar"),c.TgZ(9,"ion-segment",4),c.NdJ("ionChange",function(t){return e.segmentChanged(t)}),c.TgZ(10,"ion-segment-button",5),c.TgZ(11,"ion-label"),c._UZ(12,"ion-icon",6),c.qZA(),c.qZA(),c.TgZ(13,"ion-segment-button",7),c.TgZ(14,"ion-label"),c._UZ(15,"ion-icon",8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(16,v,13,3,"ion-content",9),c.YNc(17,b,9,1,"ion-content",9)),2&t&&(c.xp6(16),c.Q6J("ngIf","ajouter"===e.affichage),c.xp6(1),c.Q6J("ngIf","ajouter"!==e.affichage))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.fG,r.wd,r.cJ,r.QI,r.GO,r.Q$,r.gu,i.O5,r.W2,r.Ie,o._Y,o.JL,o.sg,r.pK,r.j9,o.JJ,o.u,r.YG,r.VI,r.nJ,r.Wo,i.sg,r.q_,r.td,r.IK,r.u8],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#4070a6}ion-item[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.ajouter[_ngcontent-%COMP%]{font-size:larger;padding:.5em;text-align:center}.bar[_ngcontent-%COMP%]{border-top:25px green!important}.supprimer[_ngcontent-%COMP%]{font-size:larger;padding:.5em;margin-top:2em;text-align:center}"]}),t}()}],C=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[s.Bz.forChild(T)],s.Bz]}),t}(),q=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,o.u5,o.UX,r.Pc,C]]}),t}()},5411:function(t,e,n){"use strict";n.d(e,{a:function(){return r}});var i=n(5366),o=n(4812),r=function(){function t(t){this.toast=t}return t.prototype.showToast=function(t){this.myToast=this.toast.create({message:t,duration:2e3,position:"top",cssClass:"message"}).then(function(t){console.log(t),t.present()})},t.\u0275fac=function(e){return new(e||t)(i.LFG(o.yF))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);