(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[1753],{1753:function(t,e,i){"use strict";i.r(e),i.d(e,{AjouterVarieterPageModule:function(){return q}});var n=i(1116),o=i(1462),r=i(4812),a=i(9272),s=i(4762),u=i(5366),c=i(5540),l=i(7617),f=i(5411),g=i(3530),h=i(80),m=function(){function t(t,e){this.firestore=t,this.afSG=e,this.ref="Variete",this.varieteList=this.firestore.collection("Variete")}return t.prototype.getVarieteList=function(){return this.varieteList.valueChanges().pipe((0,g.P)()).toPromise()},t.prototype.postPlanteList=function(t){return this.varieteList.add(t)},t.prototype.deleteVariete=function(t){return this.varieteList.doc("/"+t).delete()},t.\u0275fac=function(e){return new(e||t)(u.LFG(l.ST),u.LFG(h.Q1))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function p(t,e){1&t&&(u.TgZ(0,"span",15),u._uU(1," champ obligatoire "),u.qZA())}function d(t,e){1&t&&(u.TgZ(0,"span",15),u._uU(1," minimun 2 caract\xe9res "),u.qZA())}function v(t,e){if(1&t){var i=u.EpF();u.TgZ(0,"ion-content"),u.TgZ(1,"ion-item"),u.TgZ(2,"ion-label",10),u._uU(3,"Ajouter une Vari\xe9t\xe9e"),u.qZA(),u.qZA(),u.TgZ(4,"form",11),u.NdJ("ngSubmit",function(){return u.CHM(i),u.oxw().addVarieter()}),u.TgZ(5,"ion-item"),u.TgZ(6,"ion-label",2),u._uU(7,"nom de la Vari\xe9t\xe9e:"),u.qZA(),u._UZ(8,"ion-input",12),u.YNc(9,p,2,0,"span",13),u.YNc(10,d,2,0,"span",13),u.qZA(),u.TgZ(11,"ion-button",14),u._uU(12,"Valider"),u.qZA(),u.qZA(),u.qZA()}if(2&t){var n=u.oxw();u.xp6(4),u.Q6J("formGroup",n.varieterFrom),u.xp6(5),u.Q6J("ngIf",n.isSubmitted&&(null==n.errorControl.nom.errors?null:n.errorControl.nom.errors.required)),u.xp6(1),u.Q6J("ngIf",n.isSubmitted&&(null==n.errorControl.nom.errors?null:n.errorControl.nom.errors.minlength))}}function Z(t,e){if(1&t){var i=u.EpF();u.TgZ(0,"ion-list"),u.TgZ(1,"ion-item-sliding"),u.TgZ(2,"ion-item"),u.TgZ(3,"ion-label",2),u._uU(4),u.qZA(),u.qZA(),u.TgZ(5,"ion-item-options",20),u.TgZ(6,"ion-item-option",21),u.NdJ("click",function(){var t=u.CHM(i).$implicit;return u.oxw(2).delete(t.id)}),u._UZ(7,"ion-icon",22),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){var n=e.$implicit;u.xp6(4),u.Oqu(n.nom)}}function b(t,e){if(1&t){var i=u.EpF();u.TgZ(0,"ion-content"),u.TgZ(1,"ion-item"),u.TgZ(2,"ion-label",16),u._uU(3,"Supprimer une Vari\xe9t\xe9e"),u.qZA(),u.qZA(),u.TgZ(4,"ion-item"),u.TgZ(5,"ion-searchbar",17),u.NdJ("ionChange",function(t){return u.CHM(i),u.oxw().filterList(t)}),u.qZA(),u.qZA(),u.TgZ(6,"ion-refresher",18),u.NdJ("ionRefresh",function(t){return u.CHM(i),u.oxw().doRefresh(t)}),u._UZ(7,"ion-refresher-content"),u.qZA(),u.YNc(8,Z,8,1,"ion-list",19),u.qZA()}if(2&t){var n=u.oxw();u.xp6(8),u.Q6J("ngForOf",n.varieteList)}}var T=[{path:"",component:function(){function t(t,e,i,n,o,r,a){this.router=t,this.alertController=e,this.formBuilder=i,this.afDB=n,this.firestore=o,this.toastCtrl=r,this.varieteService=a,this.isSubmitted=!1,this.tableauVariete=[],this.variete={id:"",nom:""}}return t.prototype.ngOnInit=function(){return(0,s.mG)(this,void 0,void 0,function(){var t;return(0,s.Jh)(this,function(e){switch(e.label){case 0:return void 0===this.affichage&&(this.affichage="liste"),this.varieterFrom=this.formBuilder.group({nom:["",[o.kI.required,o.kI.minLength(2)]]}),t=this,[4,this.initializeItems()];case 1:return t.varieteList=e.sent(),[2]}})})},t.prototype.segmentChanged=function(t){this.affichage=t.detail.value},Object.defineProperty(t.prototype,"errorControl",{get:function(){return this.varieterFrom.controls},enumerable:!1,configurable:!0}),t.prototype.addVarieter=function(){var t=this;this.varieterFrom.valid?(this.variete.nom=this.varieterFrom.value.nom,this.varieteService.postPlanteList(this.variete).then(function(e){null==e.id?(t.message="la variet\xe9e n'a pas pu \xeatre enregistr\xe9e",t.toastCtrl.showToast(t.message)):(t.firestore.doc("Variete/"+e.id).set({id:e.id,nom:t.varieterFrom.value.nom}),t.message="la variet\xe9e \xe0 \xe9tait enregistr\xe9",t.toastCtrl.showToast(t.message))})):(this.message="enter une valeure dans le champs",this.toastCtrl.showToast(this.message))},t.prototype.filterList=function(t){return(0,s.mG)(this,void 0,void 0,function(){var e,i;return(0,s.Jh)(this,function(n){switch(n.label){case 0:return e=this,[4,this.initializeItems()];case 1:return e.varieteList=n.sent(),(i=t.srcElement.value)?(this.varieteList=this.varieteList.filter(function(t){if(t.nom&&i)return t.nom.toLowerCase().indexOf(i.toLowerCase())>-1}),[2]):[2]}})})},t.prototype.doRefresh=function(t){return(0,s.mG)(this,void 0,void 0,function(){var e,i=this;return(0,s.Jh)(this,function(n){switch(n.label){case 0:return[4,this.initializeItems()];case 1:return e=n.sent(),console.log("Begin async operation"),setTimeout(function(){i.varieteList=e,console.log("Async operation has ended"),t.target.complete()},2e3),[2]}})})},t.prototype.initializeItems=function(){return(0,s.mG)(this,void 0,void 0,function(){var t;return(0,s.Jh)(this,function(e){switch(e.label){case 0:return this.tableauVariete=[],t=this,[4,this.varieteService.getVarieteList()];case 1:return t.tableauVariete=e.sent(),console.log(this.tableauVariete),[2,this.tableauVariete]}})})},t.prototype.delete=function(t){return(0,s.mG)(this,void 0,void 0,function(){var e;return(0,s.Jh)(this,function(i){switch(i.label){case 0:return this.varieteService.deleteVariete(t),this.tableauVariete=[],e=this,[4,this.initializeItems()];case 1:return e.varieteList=i.sent(),this.message="la variet\xe9e \xe0 \xe9tait supprimer ",this.toastCtrl.showToast(this.message),[2]}})})},t.\u0275fac=function(e){return new(e||t)(u.Y36(a.F0),u.Y36(r.Br),u.Y36(o.qu),u.Y36(c.KQ),u.Y36(l.ST),u.Y36(f.a),u.Y36(m))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-ajouter-varieter"]],decls:18,vars:2,consts:[[1,"header"],["slot","start"],["color","light"],["slot","end"],["value","liste",3,"ionChange"],["value","ajouter"],["name","add-circle-outline","size","small"],["value","liste"],["name","list-outline","size","small"],[4,"ngIf"],["color","light",1,"ajouter"],["color","light",3,"formGroup","ngSubmit"],["color","light","type","text","placeholder","Vari\xe9t\xe9e","formControlName","nom"],["class","error ion-padding","color","light","class","color",4,"ngIf"],["type","submit","expand","block"],["color","light",1,"color"],["color","light",1,"supprimer"],["placeholder","recherche",3,"ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar",0),u.TgZ(2,"ion-buttons",1),u._UZ(3,"ion-back-button",2),u.qZA(),u.TgZ(4,"ion-buttons",3),u._UZ(5,"ion-menu-button",2),u.qZA(),u.TgZ(6,"ion-title",2),u._uU(7,"La gestion des Vari\xe9t\xe9es"),u.qZA(),u.qZA(),u.TgZ(8,"ion-toolbar"),u.TgZ(9,"ion-segment",4),u.NdJ("ionChange",function(t){return e.segmentChanged(t)}),u.TgZ(10,"ion-segment-button",5),u.TgZ(11,"ion-label"),u._UZ(12,"ion-icon",6),u.qZA(),u.qZA(),u.TgZ(13,"ion-segment-button",7),u.TgZ(14,"ion-label"),u._UZ(15,"ion-icon",8),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(16,v,13,3,"ion-content",9),u.YNc(17,b,9,1,"ion-content",9)),2&t&&(u.xp6(16),u.Q6J("ngIf","ajouter"===e.affichage),u.xp6(1),u.Q6J("ngIf","ajouter"!==e.affichage))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.fG,r.wd,r.cJ,r.QI,r.GO,r.Q$,r.gu,n.O5,r.W2,r.Ie,o._Y,o.JL,o.sg,r.pK,r.j9,o.JJ,o.u,r.YG,r.VI,r.nJ,r.Wo,n.sg,r.q_,r.td,r.IK,r.u8],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#4070a6}ion-item[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.ajouter[_ngcontent-%COMP%]{font-size:larger;padding:.5em;text-align:center}.bar[_ngcontent-%COMP%]{border-top:25px green!important}.supprimer[_ngcontent-%COMP%]{font-size:larger;padding:.5em;margin-top:2em;text-align:center}"]}),t}()}],C=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[a.Bz.forChild(T)],a.Bz]}),t}(),q=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.ez,o.u5,o.UX,r.Pc,C]]}),t}()},5411:function(t,e,i){"use strict";i.d(e,{a:function(){return r}});var n=i(5366),o=i(4812),r=function(){function t(t){this.toast=t}return t.prototype.showToast=function(t){this.myToast=this.toast.create({message:t,duration:2e3,position:"top",cssClass:"message"}).then(function(t){console.log(t),t.present()})},t.\u0275fac=function(e){return new(e||t)(n.LFG(o.yF))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);