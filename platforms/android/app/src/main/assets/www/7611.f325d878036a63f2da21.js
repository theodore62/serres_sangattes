(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[7611],{7611:function(e,t,n){"use strict";n.r(t),n.d(t,{GetionDeClientsPageModule:function(){return w}});var o=n(1116),i=n(1462),r=n(4812),l=n(9272),s=n(4762),a=n(5366),u=n(5411),c=n(620),p=n(7617),m=n(4519);function g(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function h(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function f(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function d(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function Z(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function C(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function b(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function q(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function v(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function T(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function A(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function _(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function x(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," champ obligatoire "),a.qZA())}function I(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1," minimun 2 caract\xe9res "),a.qZA())}function U(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ion-content"),a.TgZ(1,"ion-item",8),a.TgZ(2,"ion-label",9),a._uU(3,"Ajouter un(e) client(e)"),a.qZA(),a.qZA(),a.TgZ(4,"form",10),a.NdJ("ngSubmit",function(){return a.CHM(n),a.oxw().addClient()}),a.TgZ(5,"ion-item"),a.TgZ(6,"ion-label",1),a._uU(7,"nom:"),a.qZA(),a._UZ(8,"ion-input",11),a.YNc(9,g,2,0,"span",12),a.YNc(10,h,2,0,"span",12),a.qZA(),a.TgZ(11,"ion-item"),a.TgZ(12,"ion-label",1),a._uU(13,"Pr\xe9nom:"),a.qZA(),a._UZ(14,"ion-input",13),a.YNc(15,f,2,0,"span",12),a.YNc(16,d,2,0,"span",12),a.qZA(),a.TgZ(17,"ion-item"),a.TgZ(18,"ion-label",1),a._uU(19,"Email:"),a.qZA(),a._UZ(20,"ion-input",14),a.YNc(21,Z,2,0,"span",12),a.YNc(22,C,2,0,"span",12),a.qZA(),a.TgZ(23,"ion-item"),a.TgZ(24,"ion-label",1),a._uU(25,"T\xe9l\xe9phone fixe:"),a.qZA(),a._UZ(26,"ion-input",15),a.YNc(27,b,2,0,"span",12),a.YNc(28,q,2,0,"span",12),a.qZA(),a.TgZ(29,"ion-item"),a.TgZ(30,"ion-label",1),a._uU(31,"T\xe9l\xe9phone portable:"),a.qZA(),a._UZ(32,"ion-input",16),a.YNc(33,v,2,0,"span",12),a.YNc(34,T,2,0,"span",12),a.qZA(),a.TgZ(35,"ion-item"),a.TgZ(36,"ion-label",1),a._uU(37,"Adresse:"),a.qZA(),a._UZ(38,"ion-input",17),a.YNc(39,A,2,0,"span",12),a.YNc(40,_,2,0,"span",12),a.qZA(),a.TgZ(41,"ion-item"),a.TgZ(42,"ion-label",1),a._uU(43,"Code postal:"),a.qZA(),a._UZ(44,"ion-input",18),a.YNc(45,x,2,0,"span",12),a.YNc(46,I,2,0,"span",12),a.qZA(),a.TgZ(47,"ion-button",19),a._uU(48,"Valider"),a.qZA(),a.qZA(),a.qZA()}if(2&e){var o=a.oxw();a.xp6(4),a.Q6J("formGroup",o.clientFrom),a.xp6(5),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.nom.errors?null:o.errorControl.nom.errors.required)),a.xp6(1),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.nom.errors?null:o.errorControl.nom.errors.minlength)),a.xp6(5),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.prenom.errors?null:o.errorControl.prenom.errors.required)),a.xp6(1),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.prenom.errors?null:o.errorControl.prenom.errors.minlength)),a.xp6(5),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.email.errors?null:o.errorControl.email.errors.required)),a.xp6(1),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.email.errors?null:o.errorControl.email.errors.minlength)),a.xp6(5),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.fixe.errors?null:o.errorControl.fixe.errors.required)),a.xp6(1),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.fixe.errors?null:o.errorControl.fixe.errors.minlength)),a.xp6(5),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.portable.errors?null:o.errorControl.portable.errors.required)),a.xp6(1),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.portable.errors?null:o.errorControl.portable.errors.minlength)),a.xp6(5),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.adresse.errors?null:o.errorControl.adresse.errors.required)),a.xp6(1),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.adresse.errors?null:o.errorControl.adresse.errors.minlength)),a.xp6(5),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.postal.errors?null:o.errorControl.postal.errors.required)),a.xp6(1),a.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.postal.errors?null:o.errorControl.postal.errors.minlength))}}function y(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ion-list"),a.TgZ(1,"ion-item-sliding"),a.TgZ(2,"ion-item"),a.TgZ(3,"ion-label",1),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"ion-item-options",24),a.TgZ(6,"ion-item-option",25),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(2).delete(e.id)}),a._UZ(7,"ion-icon",26),a.qZA(),a.TgZ(8,"ion-item-option",25),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(2).update(e.id)}),a._UZ(9,"img",27),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var o=t.$implicit;a.xp6(4),a.AsE("",o.nom," ",o.prenom,"")}}function J(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ion-content"),a.TgZ(1,"ion-item",8),a.TgZ(2,"ion-label",1),a._uU(3," Liste des clients"),a.qZA(),a.qZA(),a.TgZ(4,"ion-item"),a.TgZ(5,"ion-searchbar",21),a.NdJ("ionChange",function(e){return a.CHM(n),a.oxw().filterList(e)}),a.qZA(),a.qZA(),a.TgZ(6,"ion-refresher",22),a.NdJ("ionRefresh",function(e){return a.CHM(n),a.oxw().doRefresh(e)}),a._UZ(7,"ion-refresher-content"),a.qZA(),a.YNc(8,y,10,2,"ion-list",23),a.qZA()}if(2&e){var o=a.oxw();a.xp6(8),a.Q6J("ngForOf",o.clientsList)}}var N=[{path:"",component:function(){function e(e,t,n,o,i,r,l){this.formBuilder=e,this.toastCtrl=t,this.clientService=n,this.modalController=o,this.firestore=i,this.router=r,this.dataService=l,this.isSubmitted=!1,this.tableauClients=[],this.client={id:"",nom:"",prenom:"",email:"",fixe:"",portable:"",adresse:"",postal:""}}return e.prototype.ngOnInit=function(){return(0,s.mG)(this,void 0,void 0,function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:return void 0===this.affichage&&(this.affichage="liste"),e=this,[4,this.initializeItems()];case 1:return e.clientsList=t.sent(),this.clientFrom=this.formBuilder.group({nom:["",[i.kI.required,i.kI.minLength(2)]],prenom:["",[i.kI.required,i.kI.minLength(2)]],email:["",[i.kI.required,i.kI.minLength(2),i.kI.email]],fixe:["",[i.kI.maxLength(10)]],portable:["",[i.kI.required,i.kI.maxLength(10)]],adresse:["",[i.kI.required,i.kI.minLength(2)]],postal:["",[i.kI.required,i.kI.maxLength(5)]]}),[2]}})})},e.prototype.segmentChanged=function(e){this.affichage=e.detail.value},e.prototype.initializeItems=function(){return(0,s.mG)(this,void 0,void 0,function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:return this.tableauClients=[],e=this,[4,this.clientService.getClientsList()];case 1:return e.tableauClients=t.sent(),[2,this.tableauClients]}})})},e.prototype.filterList=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t,n;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return t=this,[4,this.initializeItems()];case 1:return t.clientsList=o.sent(),(n=e.srcElement.value)?(this.clientsList=this.clientsList.filter(function(e){if(e.nom&&n)return e.nom.toLowerCase().indexOf(n.toLowerCase())>-1||e.prenom.toLowerCase().indexOf(n.toLowerCase())>-1}),[2]):[2]}})})},e.prototype.doRefresh=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t,n=this;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return[4,this.initializeItems()];case 1:return t=o.sent(),console.log("Begin async operation"),setTimeout(function(){n.clientsList=t,console.log("Async operation has ended"),e.target.complete()},2e3),[2]}})})},Object.defineProperty(e.prototype,"errorControl",{get:function(){return this.clientFrom.controls},enumerable:!1,configurable:!0}),e.prototype.addClient=function(){var e=this;this.clientFrom.valid?(this.client.nom=this.clientFrom.value.nom,this.client.prenom=this.clientFrom.value.prenom,this.client.email=this.clientFrom.value.email,this.client.fixe=this.clientFrom.value.fixe,this.client.portable=this.clientFrom.value.portable,this.client.adresse=this.clientFrom.value.adresse,this.client.postal=this.clientFrom.value.postal,this.clientService.postClient(this.client).then(function(t){null==t.id?(e.message="les donn\xe9es n'ont pas pu \xeatre enregistr\xe9es",e.toastCtrl.showToast(e.message)):(e.firestore.doc("Client/"+t.id).set({id:t.id,nom:e.clientFrom.value.nom,prenom:e.clientFrom.value.prenom,email:e.clientFrom.value.email,fixe:e.clientFrom.value.fixe,portable:e.clientFrom.value.portable,adresse:e.clientFrom.value.adresse,postal:e.clientFrom.value.postal}),e.message="les donn\xe9es ont pu \xeatre enregistr\xe9es",e.toastCtrl.showToast(e.message))})):(this.message="enter une valeur dans le champ",this.toastCtrl.showToast(this.message))},e.prototype.update=function(e){return(0,s.mG)(this,void 0,void 0,function(){return(0,s.Jh)(this,function(t){return this.dataService.setData("idClient",e),this.router.navigateByUrl("details-client"),[2]})})},e.prototype.delete=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t;return(0,s.Jh)(this,function(n){switch(n.label){case 0:return console.log(e),this.clientService.deleteClient(e),this.tableauClients=[],t=this,[4,this.initializeItems()];case 1:return t.clientsList=n.sent(),this.message="les donn\xe9es ont pu \xeatre supprimer",this.toastCtrl.showToast(this.message),[2]}})})},e.\u0275fac=function(t){return new(t||e)(a.Y36(i.qu),a.Y36(u.a),a.Y36(c.y),a.Y36(r.IN),a.Y36(p.ST),a.Y36(l.F0),a.Y36(m.D))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-getion-de-clients"]],decls:16,vars:2,consts:[["slot","start"],["color","light"],["value","liste",3,"ionChange"],["value","ajouter"],["name","add-circle-outline","size","small"],["value","liste"],["name","list-outline","size","small"],[4,"ngIf"],[1,"titre"],["color","light",1,"ajouter"],["color","light",3,"formGroup","ngSubmit"],["color","light","type","text","placeholder","nom","formControlName","nom"],["class","error ion-padding","color","light","class","color",4,"ngIf"],["color","light","type","text","placeholder","prenom","formControlName","prenom"],["color","light","type","email","placeholder","email","formControlName","email"],["color","light","type","number","placeholder","fixe","formControlName","fixe"],["color","light","type","number","placeholder","portable","formControlName","portable"],["color","light","type","text","placeholder","adresse","formControlName","adresse"],["color","light","type","number","placeholder","postal","formControlName","postal"],["type","submit","expand","block"],["color","light",1,"color"],["placeholder","recherche",3,"ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"],["src","https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-menu-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5,"Getion de Clients"),a.qZA(),a.qZA(),a.TgZ(6,"ion-toolbar"),a.TgZ(7,"ion-segment",2),a.NdJ("ionChange",function(e){return t.segmentChanged(e)}),a.TgZ(8,"ion-segment-button",3),a.TgZ(9,"ion-label"),a._UZ(10,"ion-icon",4),a.qZA(),a.qZA(),a.TgZ(11,"ion-segment-button",5),a.TgZ(12,"ion-label"),a._UZ(13,"ion-icon",6),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(14,U,49,15,"ion-content",7),a.YNc(15,J,9,1,"ion-content",7)),2&e&&(a.xp6(14),a.Q6J("ngIf","ajouter"===t.affichage),a.xp6(1),a.Q6J("ngIf","ajouter"!==t.affichage))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.cJ,r.QI,r.GO,r.Q$,r.gu,o.O5,r.W2,r.Ie,i._Y,i.JL,i.sg,r.pK,r.j9,i.JJ,i.u,r.as,r.YG,r.VI,r.nJ,r.Wo,o.sg,r.q_,r.td,r.IK,r.u8],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#7397be}ion-item[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.titre[_ngcontent-%COMP%]{font-size:larger;padding:.5em;margin-top:2em;text-align:center}"]}),e}()}],k=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[l.Bz.forChild(N)],l.Bz]}),e}(),w=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.ez,i.u5,i.UX,r.Pc,k]]}),e}()},620:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var o=n(3530),i=n(5366),r=n(7617),l=n(80),s=function(){function e(e,t){this.firestore=e,this.afSG=t,this.ref="Client",this.client=this.firestore.collection("Client")}return e.prototype.getListClients=function(){return this.client.valueChanges()},e.prototype.getClientsList=function(){return this.client.valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.postClient=function(e){return this.client.add(e)},e.prototype.getClient=function(e){return this.client.doc("/"+e).valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.updateClient=function(e,t){this.client.doc("/"+e).update(t)},e.prototype.deleteClient=function(e){return this.client.doc("/"+e).delete()},e.\u0275fac=function(t){return new(t||e)(i.LFG(r.ST),i.LFG(l.Q1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},5411:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var o=n(5366),i=n(4812),r=function(){function e(e){this.toast=e}return e.prototype.showToast=function(e){this.myToast=this.toast.create({message:e,duration:2e3,position:"top",cssClass:"message"}).then(function(e){console.log(e),e.present()})},e.\u0275fac=function(t){return new(t||e)(o.LFG(i.yF))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);