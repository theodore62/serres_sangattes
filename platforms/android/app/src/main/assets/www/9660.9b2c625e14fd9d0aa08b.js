(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[9660],{9660:(e,t,o)=>{"use strict";o.d(t,{P:()=>U});var i=o(4762),n=o(665),r=o(7716),l=o(2859),u=o(1792),a=o(9842),s=o(2639),c=o(5090),d=o(6086),m=o(174),g=o(8583);function p(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," champ obligatoire "),r.qZA())}function h(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," minimun 2 caract\xe9res "),r.qZA())}function Z(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",38),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.nom),r.xp6(1),r.Oqu(e.nom)}}function f(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," champ obligatoire "),r.qZA())}function q(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," minimun 2 caract\xe9res "),r.qZA())}function A(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," champ obligatoire "),r.qZA())}function v(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," minimun 2 caract\xe9res "),r.qZA())}function b(e,t){1&e&&(r.TgZ(0,"ion-label",4),r._uU(1,"p\xe9riode de r\xe9colte:"),r.qZA())}function T(e,t){1&e&&(r.TgZ(0,"ion-label",4),r._uU(1,"Mois de fleuraison:"),r.qZA())}function y(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",38),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e),r.xp6(1),r.Oqu(e)}}function _(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",38),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e),r.xp6(1),r.Oqu(e)}}function I(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," champ obligatoire "),r.qZA())}function C(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," minimun 2 caract\xe9res "),r.qZA())}let U=(()=>{class e{constructor(e,t,o,i,n,r,l,u,a,s){this.alertController=e,this.afSG=t,this.plantesService=o,this.modalController=i,this.formBuilder=n,this.camera=r,this.firestore=l,this.loadingController=u,this.toastCtrl=a,this.router=s,this.planteDetail=[],this.image="",this.isSubmitted=!1,this.texte="",this.plante={id:"",nom:"",variete:"",couleur:"",fleuraison:"",hauteur:"",description:"",type:"",de:"",a:"",image:""}}get errorControl(){return this.annonce.controls}ngOnInit(){this.varieters=this.firestore.collection("Variete").valueChanges(),this.listMois=["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","d\xe9cembre"],this.annonce=this.formBuilder.group({nom:["",[n.kI.required]],variete:["",[n.kI.required]],couleur:["",[n.kI.required]],fleuraison:["",[n.kI.required]],hauteur:["",[n.kI.required]],description:["",[n.kI.required]],type:["",[n.kI.required]],de:["",[n.kI.required]],a:["",[n.kI.required]],image:[""]}),this.plantesService.getDetailPlante(this.id).then(e=>{this.planteDetail.push(e),this.urlImageUpdate=this.planteDetail[0].image,this.afSG.ref("/"+e.image).getDownloadURL().subscribe(e=>{this.planteDetail[0].image=e,this.planteDetail.forEach(e=>{this.urlImage=e.image,this.epoque=e.type,"Fleur"!==this.epoque?(this.texte="Epoque de r\xe9colte:",document.getElementById("fleuraisonLF").style.display="block",document.getElementById("nom").setAttribute("value",e.nom),document.getElementById("couleur").setAttribute("value",e.couleur),document.getElementById("hauteur").setAttribute("value",e.hauteur),document.getElementById("description").setAttribute("value",e.description),document.getElementById("type").setAttribute("value",e.type),document.getElementById("urlimage").setAttribute("src",e.image),document.getElementById("fleuraisonLF").setAttribute("value",e.fleuraison),document.getElementById("variete").setAttribute("value",e.variete)):(this.texte="Epoque de fleuraison:",document.getElementById("fleuraison").style.display="block",document.getElementById("nom").setAttribute("value",e.nom),document.getElementById("couleur").setAttribute("value",e.couleur),document.getElementById("hauteur").setAttribute("value",e.hauteur),document.getElementById("description").setAttribute("value",e.description),document.getElementById("type").setAttribute("value",e.type),document.getElementById("urlimage").setAttribute("src",e.image),document.getElementById("fleuraison").setAttribute("value",e.fleuraison),document.getElementById("variete").setAttribute("value",e.variete)),document.getElementById("de").setAttribute("value",e.de),document.getElementById("a").setAttribute("value",e.a)})})})}closeModal(){this.modalController.dismiss({dismissed:!0})}addPhoto(){return(0,i.mG)(this,void 0,void 0,function*(){const e=yield this.openLibrary();this.image="data:image/jpg;base64,"+e})}openLibrary(){return(0,i.mG)(this,void 0,void 0,function*(){const e={quality:100,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetWidth:1e3,targetHeight:1e3,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY};return yield this.camera.getPicture(e)})}addAnnonce(){return(0,i.mG)(this,void 0,void 0,function*(){if(!this.annonce.valid)return this.message="enter une valeur dans le champ",!1;{console.log(this.image),""!==this.image?(this.imagePath=(new Date).getTime()+".jpg",this.uploadFirebase(),this.afSG.refFromURL(this.urlImage).delete(),this.annonce.value.image=this.imagePath):this.annonce.value.image=this.urlImageUpdate;const e=yield this.loadingController.create({duration:2e3});yield e.present(),this.plantesService.updatePlante(this.id,this.urlImage,this.annonce.value),yield e.onDidDismiss();const t=yield this.alertController.create({header:"F\xe9licitation",message:"La ou les modification(s) on ou \xe0 bien \xe9tait \xe9ffectuer",buttons:["OK"]});yield t.present(),this.modalController.dismiss({dismissed:!0})}})}uploadFirebase(){return(0,i.mG)(this,void 0,void 0,function*(){this.upload=this.afSG.ref(this.imagePath).putString(this.image,"data_url")})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(l.Br),r.Y36(u.Q1),r.Y36(a.B),r.Y36(l.IN),r.Y36(n.qu),r.Y36(s.V1),r.Y36(c.ST),r.Y36(l.HT),r.Y36(d.a),r.Y36(m.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-modal"]],decls:92,vars:18,consts:[["slot","end",3,"click"],["size","large","name","close-circle-outline"],[2,"background-color","silver"],[3,"formGroup","ngSubmit"],["color","light"],["color","light","type","text","placeholder","nom","id","nom","value","","formControlName","nom"],["class","error ion-padding",4,"ngIf"],["color","light","placeholder","Select One","required","","id","variete","value","","formControlName","variete"],[3,"value",4,"ngFor","ngForOf"],["color","light","type","text","placeholder","couleur","required","","id","couleur","value","","formControlName","couleur"],["color","light","placeholder","fleuraison","required","","id","fleuraison","value","","formControlName","fleuraison",2,"display","none"],["value","Annuelles"],["value","Bisannuelles"],["value","Vivaces"],["value","Aromatiques"],["color","light","placeholder","Select One","required","","id","fleuraisonLF","value","","formControlName","fleuraison",2,"display","none"],["value","Ete"],["value","Hiver"],["color","light",4,"ngIf"],["color","light","placeholder","de","required","","formControlName","de","id","de"],["color","light",2,"width","2em"],["color","light","placeholder","a","required","","formControlName","a","id","a"],["color","light","placeholder","Select One","required","","id","hauteur","value","","formControlName","hauteur"],["value","basse"],["value","moyenne"],["value","haute"],["color","light","type","text","placeholder","description","required","","id","description","value","","formControlName","description"],["color","light","placeholder","Select One","required","","id","type","value","","formControlName","type"],["value","Fleur"],["value","Fruit"],["value","Legumes"],["expand","block","id","imageB",3,"click"],["name","image","slot","start"],[1,"flex"],[1,"img-box"],["id","urlimage",3,"src"],["type","submit","expand","block"],[1,"error","ion-padding"],[3,"value"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-title"),r._uU(3,"modifier la plante"),r.qZA(),r.TgZ(4,"ion-buttons",0),r.NdJ("click",function(){return t.closeModal()}),r._UZ(5,"ion-icon",1),r.qZA(),r.qZA(),r.qZA(),r.TgZ(6,"ion-content"),r.TgZ(7,"ion-list",2),r.TgZ(8,"form",3),r.NdJ("ngSubmit",function(){return t.addAnnonce()}),r.TgZ(9,"ion-item"),r.TgZ(10,"ion-label",4),r._uU(11,"Nom commun :"),r.qZA(),r._UZ(12,"ion-input",5),r.YNc(13,p,2,0,"span",6),r.YNc(14,h,2,0,"span",6),r.qZA(),r.TgZ(15,"ion-item"),r.TgZ(16,"ion-label",4),r._uU(17,"Vari\xe9t\xe9:"),r.qZA(),r.TgZ(18,"ion-select",7),r.YNc(19,Z,2,2,"ion-select-option",8),r.ALo(20,"async"),r.qZA(),r.qZA(),r.TgZ(21,"ion-item"),r.TgZ(22,"ion-label",4),r._uU(23,"Couleur:"),r.qZA(),r._UZ(24,"ion-input",9),r.YNc(25,f,2,0,"span",6),r.YNc(26,q,2,0,"span",6),r.qZA(),r.TgZ(27,"ion-item"),r.TgZ(28,"ion-label",4),r._uU(29),r.qZA(),r.TgZ(30,"ion-select",10),r.TgZ(31,"ion-select-option",11),r._uU(32,"Annuelles"),r.qZA(),r.TgZ(33,"ion-select-option",12),r._uU(34,"Bisannuelles"),r.qZA(),r.TgZ(35,"ion-select-option",13),r._uU(36,"Vivaces"),r.qZA(),r.TgZ(37,"ion-select-option",14),r._uU(38,"Aromatiques"),r.qZA(),r.qZA(),r.TgZ(39,"ion-select",15),r.TgZ(40,"ion-select-option",16),r._uU(41,"Ete"),r.qZA(),r.TgZ(42,"ion-select-option",17),r._uU(43,"Hiver"),r.qZA(),r.qZA(),r.YNc(44,A,2,0,"span",6),r.YNc(45,v,2,0,"span",6),r.qZA(),r.TgZ(46,"ion-item"),r.YNc(47,b,2,0,"ion-label",18),r.YNc(48,T,2,0,"ion-label",18),r.TgZ(49,"ion-item"),r.TgZ(50,"ion-select",19),r.YNc(51,y,2,2,"ion-select-option",8),r.qZA(),r.qZA(),r.TgZ(52,"ion-item"),r.TgZ(53,"ion-label",20),r._uU(54,"\xe0"),r.qZA(),r.qZA(),r.TgZ(55,"ion-item"),r.TgZ(56,"ion-select",21),r.YNc(57,_,2,2,"ion-select-option",8),r.qZA(),r.qZA(),r.qZA(),r.TgZ(58,"ion-item"),r.TgZ(59,"ion-label",4),r._uU(60,"Hauteur:"),r.qZA(),r.TgZ(61,"ion-select",22),r.TgZ(62,"ion-select-option",23),r._uU(63,"basse"),r.qZA(),r.TgZ(64,"ion-select-option",24),r._uU(65,"moyenne"),r.qZA(),r.TgZ(66,"ion-select-option",25),r._uU(67,"haute"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(68,"ion-item"),r.TgZ(69,"ion-label",4),r._uU(70,"Description:"),r.qZA(),r._UZ(71,"ion-input",26),r.YNc(72,I,2,0,"span",6),r.YNc(73,C,2,0,"span",6),r.qZA(),r.TgZ(74,"ion-item"),r.TgZ(75,"ion-label",4),r._uU(76,"Type de plante"),r.qZA(),r.TgZ(77,"ion-select",27),r.TgZ(78,"ion-select-option",28),r._uU(79,"Fleur"),r.qZA(),r.TgZ(80,"ion-select-option",29),r._uU(81,"Fruit"),r.qZA(),r.TgZ(82,"ion-select-option",30),r._uU(83,"L\xe9gume"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(84,"ion-button",31),r.NdJ("click",function(){return t.addPhoto()}),r._UZ(85,"ion-icon",32),r._uU(86," Ouvrir la biblioth\xe8que "),r.qZA(),r.TgZ(87,"div",33),r.TgZ(88,"div",34),r._UZ(89,"img",35),r.qZA(),r.qZA(),r.TgZ(90,"ion-button",36),r._uU(91,"Valider"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(8),r.Q6J("formGroup",t.annonce),r.xp6(5),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.nom.errors?null:t.errorControl.nom.errors.required)),r.xp6(1),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.nom.errors?null:t.errorControl.nom.errors.minlength)),r.xp6(5),r.Q6J("ngForOf",r.lcZ(20,16,t.varieters)),r.xp6(6),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.couleur.errors?null:t.errorControl.couleur.errors.required)),r.xp6(1),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.couleur.errors?null:t.errorControl.couleur.errors.minlength)),r.xp6(3),r.Oqu(t.texte),r.xp6(15),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.fleuraison.errors?null:t.errorControl.fleuraison.errors.required)),r.xp6(1),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.fleuraison.errors?null:t.errorControl.fleuraison.errors.minlength)),r.xp6(2),r.Q6J("ngIf","Fruit"===t.epoque||"Legumes"===t.epoque),r.xp6(1),r.Q6J("ngIf","Fleur"===t.epoque),r.xp6(3),r.Q6J("ngForOf",t.listMois),r.xp6(6),r.Q6J("ngForOf",t.listMois),r.xp6(15),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.description.errors?null:t.errorControl.description.errors.required)),r.xp6(1),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.description.errors?null:t.errorControl.description.errors.minlength)),r.xp6(16),r.Q6J("src",t.image,r.LSH))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.gu,l.W2,l.q_,n._Y,n.JL,n.sg,l.Ie,l.Q$,l.pK,l.j9,n.JJ,n.u,g.O5,l.t9,l.QI,n.Q7,g.sg,l.n0,l.YG],pipes:[g.Ov],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#9eb7d2}#imageB[_ngcontent-%COMP%]{--background:#7699bf}ion-item[_ngcontent-%COMP%]{--ion-background-color:#0000!important}"]}),e})()},6086:(e,t,o)=>{"use strict";o.d(t,{a:()=>r});var i=o(7716),n=o(2859);let r=(()=>{class e{constructor(e){this.toast=e}showToast(e){this.myToast=this.toast.create({message:e,duration:2e3,position:"top",cssClass:"message"}).then(e=>{console.log(e),e.present()})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(n.yF))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);