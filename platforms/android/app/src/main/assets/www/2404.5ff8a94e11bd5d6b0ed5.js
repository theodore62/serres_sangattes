(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[2404],{2404:(t,e,n)=>{"use strict";n.r(e),n.d(e,{LegumesPageModule:()=>C});var i=n(8583),o=n(665),s=n(2859),r=n(174),a=n(4762),l=n(9660),c=n(7716),u=n(5090),d=n(2468),g=n(9842),h=n(1792);function m(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-list",4),c.TgZ(1,"ion-item-sliding"),c.TgZ(2,"ion-item",5),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().detail(e.id)}),c.TgZ(3,"ion-thumbnail",0),c._UZ(4,"ion-img",6),c.qZA(),c.TgZ(5,"ion-label"),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"ion-item-options",7),c.TgZ(8,"ion-item-option",8),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().delete(e.id,e.image)}),c._UZ(9,"ion-icon",9),c.qZA(),c.TgZ(10,"ion-item-option",8),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().update(e.id,e.fleuraison)}),c._UZ(11,"img",10),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(4),c.Q6J("src",t.image),c.xp6(2),c.Oqu(t.nom)}}const p=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,s,r,a){this.firestore=t,this.dataService=e,this.router=n,this.plantesService=i,this.afSG=o,this.alertController=s,this.modalController=r,this.routerOutlet=a,this.tableauPlante=[]}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){this.datas=this.dataService.getData("data"),this.planteList=yield this.initializeItems()})}doRefresh(t){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.initializeItems();console.log("Begin async operation"),setTimeout(()=>{this.planteList=e,console.log("Async operation has ended"),t.target.complete()},2e3)})}initializeItems(){return(0,a.mG)(this,void 0,void 0,function*(){return this.tableauPlante=[],(yield this.plantesService.getPlanteList()).forEach(t=>{t.fleuraison===this.datas&&"Legumes"===t.type&&(console.log(t.image),this.afSG.ref("/"+t.image).getDownloadURL().subscribe(e=>{t.image=e,this.tableauPlante.push(t)}))}),console.log(this.tableauPlante),this.tableauPlante})}filterList(t){return(0,a.mG)(this,void 0,void 0,function*(){this.planteList=yield this.initializeItems();const e=t.srcElement.value;e&&(this.planteList=this.planteList.filter(t=>{if(t.nom&&e)return t.nom.toLowerCase().indexOf(e.toLowerCase())>-1||t.variete.toLowerCase().indexOf(e.toLowerCase())>-1||t.couleur.toLowerCase().indexOf(e.toLowerCase())>-1||t.hauteur.toLowerCase().indexOf(e.toLowerCase())>-1||t.de.toLowerCase().indexOf(e.toLowerCase())>-1}))})}detail(t){this.dataService.setData("id",t),this.router.navigateByUrl("/details")}delete(t,e){return(0,a.mG)(this,void 0,void 0,function*(){this.afSG.refFromURL(e).delete(),this.plantesService.deletePlante(t),this.tableauPlante=[],this.planteList=yield this.initializeItems(),console.log(this.planteList)})}update(t,e){return(0,a.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:l.P,cssClass:"my-custom-class",componentProps:{id:t,fleuraison:e}});return yield n.present()})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(u.ST),c.Y36(d.D),c.Y36(r.F0),c.Y36(g.B),c.Y36(h.Q1),c.Y36(s.Br),c.Y36(s.IN),c.Y36(s.jP))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-legumes"]],decls:12,vars:1,consts:[["slot","start"],[3,"ionChange"],["slot","fixed",3,"ionRefresh"],["color","light",4,"ngFor","ngForOf"],["color","light"],[3,"click"],[3,"src"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small"],["src","https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-back-button"),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5,"L\xe9gumes"),c.qZA(),c.qZA(),c.TgZ(6,"ion-toolbar"),c.TgZ(7,"ion-searchbar",1),c.NdJ("ionChange",function(t){return e.filterList(t)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"ion-content"),c.TgZ(9,"ion-refresher",2),c.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),c._UZ(10,"ion-refresher-content"),c.qZA(),c.YNc(11,m,12,2,"ion-list",3),c.qZA()),2&t&&(c.xp6(11),c.Q6J("ngForOf",e.planteList))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.VI,s.j9,s.W2,s.nJ,s.Wo,i.sg,s.q_,s.td,s.Ie,s.Bs,s.Xz,s.Q$,s.IK,s.u8,s.gu],styles:["[_ngcontent-%COMP%]:root{--ion-safe-area-top:20px;--ion-safe-area-bottom:22px}ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%], ion-searchbar[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#4070a6}ion-item[_ngcontent-%COMP%], ion-item-option[_ngcontent-%COMP%], ion-item-options[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.my-custom-modal[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{height:20%;top:80%;position:absolute;display:block}"]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Bz.forChild(p)],r.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,o.u5,s.Pc,f]]}),t})()}}]);