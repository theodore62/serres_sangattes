(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[5350],{5350:function(e,t,n){"use strict";n.r(t),n.d(t,{DetailsClientPageModule:function(){return O}});var o=n(1116),i=n(1462),r=n(4812),a=n(9272),s=n(4762),l=n(5366),u=n(80),c=n(239),m=n(1618),d=n(620),p=n(1585),f=n(7617),g=n(5411),h=n(4519);function Z(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," champ obligatoire "),l.qZA())}function C(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function b(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," champ obligatoire "),l.qZA())}function v(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function A(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," champ obligatoire "),l.qZA())}function q(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function T(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," champ obligatoire "),l.qZA())}function _(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function x(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," champ obligatoire "),l.qZA())}function y(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function I(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," champ obligatoire "),l.qZA())}function U(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function J(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," champ obligatoire "),l.qZA())}function L(e,t){1&e&&(l.TgZ(0,"span",21),l._uU(1," minimun 2 caract\xe9res "),l.qZA())}function N(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"ion-content",8),l.TgZ(1,"ion-item",9),l.TgZ(2,"ion-label",10),l._uU(3,"D\xe9tails du client:"),l.qZA(),l.qZA(),l.TgZ(4,"form",11),l.NdJ("ngSubmit",function(){return l.CHM(n),l.oxw().updateClient()}),l.TgZ(5,"ion-item"),l.TgZ(6,"ion-label",10),l._uU(7,"nom:"),l.qZA(),l._UZ(8,"ion-input",12),l.YNc(9,Z,2,0,"span",13),l.YNc(10,C,2,0,"span",13),l.qZA(),l.TgZ(11,"ion-item"),l.TgZ(12,"ion-label",10),l._uU(13,"Pr\xe9nom:"),l.qZA(),l._UZ(14,"ion-input",14),l.YNc(15,b,2,0,"span",13),l.YNc(16,v,2,0,"span",13),l.qZA(),l.TgZ(17,"ion-item"),l.TgZ(18,"ion-label",10),l._uU(19,"Email:"),l.qZA(),l._UZ(20,"ion-input",15),l.YNc(21,A,2,0,"span",13),l.YNc(22,q,2,0,"span",13),l.qZA(),l.TgZ(23,"ion-item"),l.TgZ(24,"ion-label",10),l._uU(25,"T\xe9l\xe9phone fixe:"),l.qZA(),l._UZ(26,"ion-input",16),l.YNc(27,T,2,0,"span",13),l.YNc(28,_,2,0,"span",13),l.qZA(),l.TgZ(29,"ion-item"),l.TgZ(30,"ion-label",10),l._uU(31,"T\xe9l\xe9phone portable:"),l.qZA(),l._UZ(32,"ion-input",17),l.YNc(33,x,2,0,"span",13),l.YNc(34,y,2,0,"span",13),l.qZA(),l.TgZ(35,"ion-item"),l.TgZ(36,"ion-label",10),l._uU(37,"Adresse:"),l.qZA(),l._UZ(38,"ion-input",18),l.YNc(39,I,2,0,"span",13),l.YNc(40,U,2,0,"span",13),l.qZA(),l.TgZ(41,"ion-item"),l.TgZ(42,"ion-label",10),l._uU(43,"Code postal:"),l.qZA(),l._UZ(44,"ion-input",19),l.YNc(45,J,2,0,"span",13),l.YNc(46,L,2,0,"span",13),l.qZA(),l.TgZ(47,"ion-button",20),l._uU(48,"Valider"),l.qZA(),l.qZA(),l.qZA()}if(2&e){var o=l.oxw();l.xp6(4),l.Q6J("formGroup",o.formulaireClient),l.xp6(5),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.nom.errors?null:o.errorControl.nom.errors.required)),l.xp6(1),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.nom.errors?null:o.errorControl.nom.errors.minlength)),l.xp6(5),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.prenom.errors?null:o.errorControl.prenom.errors.required)),l.xp6(1),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.prenom.errors?null:o.errorControl.prenom.errors.minlength)),l.xp6(5),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.email.errors?null:o.errorControl.email.errors.required)),l.xp6(1),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.email.errors?null:o.errorControl.email.errors.minlength)),l.xp6(5),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.fixe.errors?null:o.errorControl.fixe.errors.required)),l.xp6(1),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.fixe.errors?null:o.errorControl.fixe.errors.minlength)),l.xp6(5),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.portable.errors?null:o.errorControl.portable.errors.required)),l.xp6(1),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.portable.errors?null:o.errorControl.portable.errors.minlength)),l.xp6(5),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.adresse.errors?null:o.errorControl.adresse.errors.required)),l.xp6(1),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.adresse.errors?null:o.errorControl.adresse.errors.minlength)),l.xp6(5),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.postal.errors?null:o.errorControl.postal.errors.required)),l.xp6(1),l.Q6J("ngIf",o.isSubmitted&&(null==o.errorControl.postal.errors?null:o.errorControl.postal.errors.minlength))}}function Y(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"ion-item-sliding"),l.TgZ(1,"ion-item"),l.TgZ(2,"ion-label",10),l._uU(3),l.qZA(),l.TgZ(4,"ion-label",10),l._uU(5),l.ALo(6,"date"),l.qZA(),l.qZA(),l.TgZ(7,"ion-item-options",27),l.TgZ(8,"ion-item-option",28),l.NdJ("click",function(){l.CHM(n);var e=l.oxw().$implicit;return l.oxw(2).delete(e.id)}),l._UZ(9,"ion-icon",29),l.qZA(),l.TgZ(10,"ion-item-option",28),l.NdJ("click",function(){l.CHM(n);var e=l.oxw().$implicit;return l.oxw(2).update(e.id,e.client)}),l._UZ(11,"img",30),l.qZA(),l.qZA(),l.qZA()}if(2&e){var o=l.oxw().$implicit;l.xp6(3),l.hij("N\xb0",o.numero,""),l.xp6(2),l.hij("Date: ",l.xi3(6,2,o.date,"dd/MM/yyyy"),"")}}function w(e,t){if(1&e&&(l.TgZ(0,"ion-list",23),l.YNc(1,Y,12,5,"ion-item-sliding",26),l.qZA()),2&e){var n=t.$implicit;l.xp6(1),l.Q6J("ngIf",!n.archive)}}function S(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"ion-item-sliding"),l.TgZ(1,"ion-item"),l.TgZ(2,"ion-label",10),l._uU(3),l.qZA(),l.TgZ(4,"ion-label",10),l._uU(5),l.ALo(6,"date"),l.qZA(),l.qZA(),l.TgZ(7,"ion-item-options",27),l.TgZ(8,"ion-item-option",28),l.NdJ("click",function(){l.CHM(n);var e=l.oxw().$implicit;return l.oxw(2).delete(e.id)}),l._UZ(9,"ion-icon",29),l.qZA(),l.TgZ(10,"ion-item-option",28),l.NdJ("click",function(){l.CHM(n);var e=l.oxw().$implicit;return l.oxw(2).update(e.id,e.client)}),l._UZ(11,"img",30),l.qZA(),l.qZA(),l.qZA()}if(2&e){var o=l.oxw().$implicit;l.xp6(3),l.hij("N\xb0",o.numero,""),l.xp6(2),l.hij("Date: ",l.xi3(6,2,o.date,"dd/MM/yyyy"),"")}}function k(e,t){if(1&e&&(l.TgZ(0,"ion-list",23),l.YNc(1,S,12,5,"ion-item-sliding",26),l.qZA()),2&e){var n=t.$implicit;l.xp6(1),l.Q6J("ngIf",n.archive)}}function Q(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"ion-content",8),l.TgZ(1,"ion-refresher",22),l.NdJ("ionRefresh",function(e){return l.CHM(n),l.oxw().doRefresh(e)}),l._UZ(2,"ion-refresher-content"),l.qZA(),l.TgZ(3,"ion-item",23),l.TgZ(4,"ion-label",10),l._uU(5," Liste des commandes"),l.qZA(),l.qZA(),l.TgZ(6,"ion-item"),l.TgZ(7,"ion-searchbar",24),l.NdJ("ionChange",function(e){return l.CHM(n),l.oxw().filterList(e)}),l.qZA(),l.qZA(),l.TgZ(8,"ion-item",23),l.TgZ(9,"ion-label",10),l._uU(10," Liste des commandes en cour"),l.qZA(),l.qZA(),l.YNc(11,w,2,1,"ion-list",25),l.TgZ(12,"ion-item",23),l.TgZ(13,"ion-label",10),l._uU(14," Liste des commandes archiv\xe9es"),l.qZA(),l.qZA(),l.YNc(15,k,2,1,"ion-list",25),l.qZA()}if(2&e){var o=l.oxw();l.xp6(11),l.Q6J("ngForOf",o.commandesList),l.xp6(4),l.Q6J("ngForOf",o.commandesList)}}var M=[{path:"",component:function(){function e(e,t,n,o,i,r,a,s,l,u,c,m,d){this.alertController=e,this.afSG=t,this.plantesService=n,this.commandeService=o,this.clientService=i,this.modalController=r,this.formBuilder=a,this.camera=s,this.firestore=l,this.loadingController=u,this.toastCtrl=c,this.router=m,this.dataService=d,this.clientDetail=[],this.isSubmitted=!1,this.tableauCommandes=[]}return Object.defineProperty(e.prototype,"errorControl",{get:function(){return this.formulaireClient.controls},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){return(0,s.mG)(this,void 0,void 0,function(){var e,t=this;return(0,s.Jh)(this,function(n){switch(n.label){case 0:return this.idClient=this.dataService.getData("idClient"),e=this,[4,this.initializeCommandes()];case 1:return e.commandesList=n.sent(),void 0===this.affichage&&(this.affichage="ajouter"),console.log(this.commandesList),this.formulaireClient=this.formBuilder.group({nom:["",[i.kI.required,i.kI.minLength(2)]],prenom:["",[i.kI.required,i.kI.minLength(2)]],email:["",[i.kI.required,i.kI.minLength(2),i.kI.email]],fixe:["",[i.kI.maxLength(10)]],portable:["",[i.kI.required,i.kI.maxLength(10)]],adresse:["",[i.kI.required,i.kI.minLength(2)]],postal:["",[i.kI.required,i.kI.maxLength(5)]]}),this.clientService.getClient(this.idClient).then(function(e){t.clientDetail.push(e),t.clientDetail.forEach(function(e){document.getElementById("nom").setAttribute("value",e.nom),document.getElementById("prenom").setAttribute("value",e.prenom),document.getElementById("email").setAttribute("value",e.email),document.getElementById("fixe").setAttribute("value",e.fixe),document.getElementById("portable").setAttribute("value",e.portable),document.getElementById("adresse").setAttribute("value",e.adresse),document.getElementById("postal").setAttribute("value",e.postal)})}),[2]}})})},e.prototype.updateClient=function(){return(0,s.mG)(this,void 0,void 0,function(){return(0,s.Jh)(this,function(e){return this.formulaireClient.valid?(this.clientService.updateClient(this.idClient,this.formulaireClient.value),this.message="La ou les modification(s) on ou \xe0 bien \xe9tait \xe9ffectuer",this.toastCtrl.showToast(this.message),[2]):(this.message="enter une valeur dans le champ",this.toastCtrl.showToast(this.message),[2,!1])})})},e.prototype.segmentChanged=function(e){this.affichage=e.detail.value},e.prototype.initializeCommandes=function(){return(0,s.mG)(this,void 0,void 0,function(){var e=this;return(0,s.Jh)(this,function(t){switch(t.label){case 0:return this.tableauCommandes=[],[4,this.commandeService.getCommandesList()];case 1:return t.sent().forEach(function(t){t.client===e.idClient&&(console.log(t),e.tableauCommandes.push(t))}),[2,this.tableauCommandes]}})})},e.prototype.delete=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t;return(0,s.Jh)(this,function(n){switch(n.label){case 0:return console.log(e),this.commandeService.deleteCommande(e),this.tableauCommandes=[],t=this,[4,this.initializeCommandes()];case 1:return t.tableauCommandes=n.sent(),[2]}})})},e.prototype.update=function(e,t){return(0,s.mG)(this,void 0,void 0,function(){return(0,s.Jh)(this,function(n){return this.dataService.setData("id",{idCommande:e,idClient:t}),this.router.navigateByUrl("details-commande"),[2]})})},e.prototype.doRefresh=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t,n=this;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return[4,this.initializeCommandes()];case 1:return t=o.sent(),setTimeout(function(){n.commandesList=t,e.target.complete()},2e3),[2]}})})},e.prototype.filterList=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t,n;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return t=this,[4,this.initializeCommandes()];case 1:return t.commandesList=o.sent(),(n=e.srcElement.value)?(this.commandesList=this.commandesList.filter(function(e){if(e.numero&&n)return e.numero.toLowerCase().indexOf(n.toLowerCase())>-1||e.date.toLowerCase().indexOf(n.toLowerCase())>-1}),[2]):[2]}})})},e.\u0275fac=function(t){return new(t||e)(l.Y36(r.Br),l.Y36(u.Q1),l.Y36(c.B),l.Y36(m.I),l.Y36(d.y),l.Y36(r.IN),l.Y36(i.qu),l.Y36(p.V1),l.Y36(f.ST),l.Y36(r.HT),l.Y36(g.a),l.Y36(a.F0),l.Y36(h.D))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-details-client"]],decls:16,vars:2,consts:[["slot","start"],[1,"segement"],["value","ajouter",3,"ionChange"],["value","ajouter"],["name","person-outline","size","small"],["value","liste"],["name","list-outline","size","small"],["class","client",4,"ngIf"],[1,"client"],[1,"titre"],["color","light"],["color","light",3,"formGroup","ngSubmit"],["color","light","type","text","placeholder","nom","id","nom","formControlName","nom"],["class","error ion-padding","color","light","class","color",4,"ngIf"],["color","light","type","text","placeholder","prenom","id","prenom","formControlName","prenom"],["color","light","type","email","placeholder","email","id","email","formControlName","email"],["color","light","type","number","placeholder","fixe","id","fixe","formControlName","fixe"],["color","light","type","number","placeholder","portable","id","portable","formControlName","portable"],["color","light","type","text","placeholder","adresse","id","adresse","formControlName","adresse"],["color","light","type","number","placeholder","postal","id","postal","formControlName","postal"],["type","submit","expand","block"],["color","light",1,"color"],["slot","fixed",3,"ionRefresh"],[1,"titreAjouter"],["placeholder","recherche",3,"ionChange"],["class","titreAjouter",4,"ngFor","ngForOf"],[4,"ngIf"],["side","end"],["color","red",3,"click"],["name","trash-outline","size","small","color","light"],["src","https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l._UZ(3,"ion-back-button"),l.qZA(),l.TgZ(4,"ion-title"),l._uU(5,"d\xe9tail s\xfbr le client"),l.qZA(),l.qZA(),l.TgZ(6,"ion-toolbar",1),l.TgZ(7,"ion-segment",2),l.NdJ("ionChange",function(e){return t.segmentChanged(e)}),l.TgZ(8,"ion-segment-button",3),l.TgZ(9,"ion-label"),l._UZ(10,"ion-icon",4),l.qZA(),l.qZA(),l.TgZ(11,"ion-segment-button",5),l.TgZ(12,"ion-label"),l._UZ(13,"ion-icon",6),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(14,N,49,15,"ion-content",7),l.YNc(15,Q,16,2,"ion-content",7)),2&e&&(l.xp6(14),l.Q6J("ngIf","ajouter"===t.affichage),l.xp6(1),l.Q6J("ngIf","liste"===t.affichage))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.cJ,r.QI,r.GO,r.Q$,r.gu,o.O5,r.W2,r.Ie,i._Y,i.JL,i.sg,r.pK,r.j9,i.JJ,i.u,r.as,r.YG,r.nJ,r.Wo,r.VI,o.sg,r.q_,r.td,r.IK,r.u8],pipes:[o.uU],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-button[_ngcontent-%COMP%]{--background:#6c91bb}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}#map_canvas[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], ion-item-options[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.titreAjouter[_ngcontent-%COMP%]{text-align:center;size:40%}#map_canvas[_ngcontent-%COMP%]{--ion-background-color:linear-gradient(#3366a0,#9eb7d2)!important}"]}),e}()}],P=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(M)],a.Bz]}),e}(),O=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.ez,i.u5,r.Pc,i.UX,P]]}),e}()},620:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var o=n(3530),i=n(5366),r=n(7617),a=n(80),s=function(){function e(e,t){this.firestore=e,this.afSG=t,this.ref="Client",this.client=this.firestore.collection("Client")}return e.prototype.getListClients=function(){return this.client.valueChanges()},e.prototype.getClientsList=function(){return this.client.valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.postClient=function(e){return this.client.add(e)},e.prototype.getClient=function(e){return this.client.doc("/"+e).valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.updateClient=function(e,t){this.client.doc("/"+e).update(t)},e.prototype.deleteClient=function(e){return this.client.doc("/"+e).delete()},e.\u0275fac=function(t){return new(t||e)(i.LFG(r.ST),i.LFG(a.Q1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},1618:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var o=n(3530),i=n(5366),r=n(7617),a=n(80),s=function(){function e(e,t){this.firestore=e,this.afSG=t,this.ref="Commandes",this.commande=this.firestore.collection("Commandes")}return e.prototype.getListCommandes=function(){return this.commande.valueChanges()},e.prototype.getCommandesList=function(){return this.commande.valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.postCommande=function(e){return this.commande.add(e)},e.prototype.getDetailCommande=function(e){return this.commande.doc("/"+e).valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.updateCommande=function(e,t){this.commande.doc("/"+e).update(t)},e.prototype.deleteCommande=function(e){return this.commande.doc("/"+e).delete()},e.prototype.updateArchive=function(e,t){this.commande.doc("/"+e).set(t)},e.\u0275fac=function(t){return new(t||e)(i.LFG(r.ST),i.LFG(a.Q1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},5411:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var o=n(5366),i=n(4812),r=function(){function e(e){this.toast=e}return e.prototype.showToast=function(e){this.myToast=this.toast.create({message:e,duration:2e3,position:"top",cssClass:"message"}).then(function(e){console.log(e),e.present()})},e.\u0275fac=function(t){return new(t||e)(o.LFG(i.yF))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);