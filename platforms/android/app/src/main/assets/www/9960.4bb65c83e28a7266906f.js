(self.webpackChunkserres_sangatte=self.webpackChunkserres_sangatte||[]).push([[9960],{9960:function(e,t,n){"use strict";n.d(t,{P:function(){return P}});var o=n(4762),i=n(1462),r=n(5366),u=n(4812),l=n(80),a=n(239),s=n(1618),c=n(620),d=n(1585),m=n(7617),p=n(5411),g=n(9272),h=n(4519),f=n(1116);function Z(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," champ obligatoire "),r.qZA())}function v(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," minimun 2 caract\xe9res "),r.qZA())}function q(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",38),r._uU(1),r.qZA()),2&e){var n=t.$implicit;r.s9C("value",n.nom),r.xp6(1),r.hij("",n.nom," ")}}function b(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," champ obligatoire "),r.qZA())}function A(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," minimun 2 caract\xe9res "),r.qZA())}function y(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," champ obligatoire "),r.qZA())}function T(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," minimun 2 caract\xe9res "),r.qZA())}function C(e,t){1&e&&(r.TgZ(0,"ion-label",4),r._uU(1,"p\xe9riode de r\xe9colte:"),r.qZA())}function _(e,t){1&e&&(r.TgZ(0,"ion-label",4),r._uU(1,"Mois de fleuraison:"),r.qZA())}function I(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",38),r._uU(1),r.qZA()),2&e){var n=t.$implicit;r.s9C("value",n),r.xp6(1),r.Oqu(n)}}function U(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",38),r._uU(1),r.qZA()),2&e){var n=t.$implicit;r.s9C("value",n),r.xp6(1),r.Oqu(n)}}function S(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," champ obligatoire "),r.qZA())}function k(e,t){1&e&&(r.TgZ(0,"span",37),r._uU(1," minimun 2 caract\xe9res "),r.qZA())}var P=function(){function e(e,t,n,o,i,r,u,l,a,s,c,d,m){this.alertController=e,this.afSG=t,this.plantesService=n,this.commandeService=o,this.clientService=i,this.modalController=r,this.formBuilder=u,this.camera=l,this.firestore=a,this.loadingController=s,this.toastCtrl=c,this.router=d,this.dataService=m,this.isSubmitted=!1,this.planteDetail=[],this.image="",this.texte="",this.plante={id:"",nom:"",variete:"",couleur:"",fleuraison:"",hauteur:"",description:"",type:"",de:"",a:"",image:""}}return Object.defineProperty(e.prototype,"errorControl",{get:function(){return this.annonce.controls},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){return(0,o.mG)(this,void 0,void 0,function(){var e=this;return(0,o.Jh)(this,function(t){return this.varieters=this.firestore.collection("Variete").valueChanges(),this.listMois=["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","d\xe9cembre"],this.annonce=this.formBuilder.group({nom:["",[i.kI.required]],variete:["",[i.kI.required]],couleur:["",[i.kI.required]],fleuraison:["",[i.kI.required]],hauteur:["",[i.kI.required]],description:["",[i.kI.required]],type:["",[i.kI.required]],de:["",[i.kI.required]],a:["",[i.kI.required]],image:[""]}),this.plantesService.getDetailPlante(this.id).then(function(t){e.planteDetail.push(t),e.urlImageUpdate=e.planteDetail[0].image,e.afSG.ref("/"+t.image).getDownloadURL().subscribe(function(t){e.planteDetail[0].image=t,e.planteDetail.forEach(function(t){e.urlImage=t.image,e.epoque=t.type,"Fleur"!==e.epoque?(e.texte="Epoque de r\xe9colte:",document.getElementById("fleuraisonLF").style.display="block",document.getElementById("nom").setAttribute("value",t.nom),document.getElementById("couleur").setAttribute("value",t.couleur),document.getElementById("hauteur").setAttribute("value",t.hauteur),document.getElementById("description").setAttribute("value",t.description),document.getElementById("type").setAttribute("value",t.type),document.getElementById("urlimage").setAttribute("src",t.image),document.getElementById("fleuraisonLF").setAttribute("value",t.fleuraison),document.getElementById("variete").setAttribute("value",t.variete)):(e.texte="Epoque de fleuraison:",document.getElementById("fleuraison").style.display="block",document.getElementById("nom").setAttribute("value",t.nom),document.getElementById("couleur").setAttribute("value",t.couleur),document.getElementById("hauteur").setAttribute("value",t.hauteur),document.getElementById("description").setAttribute("value",t.description),document.getElementById("type").setAttribute("value",t.type),document.getElementById("urlimage").setAttribute("src",t.image),document.getElementById("fleuraison").setAttribute("value",t.fleuraison),document.getElementById("variete").setAttribute("value",t.variete)),document.getElementById("de").setAttribute("value",t.de),document.getElementById("a").setAttribute("value",t.a)})})}),[2]})})},e.prototype.addPhoto=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.openLibrary()];case 1:return e=t.sent(),this.image="data:image/jpg;base64,"+e,[2]}})})},e.prototype.openLibrary=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetWidth:1e3,targetHeight:1e3,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY})];case 1:return[2,e.sent()]}})})},e.prototype.uploadFirebase=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return this.upload=this.afSG.ref(this.imagePath).putString(this.image,"data_url"),[2]})})},e.prototype.addAnnonce=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return this.annonce.valid?[3,1]:(this.message="enter une valeur dans le champ",[2,!1]);case 1:return""!==this.image?(this.imagePath=(new Date).getTime()+".jpg",this.uploadFirebase(),this.afSG.refFromURL(this.urlImage).delete(),this.annonce.value.image=this.imagePath):this.annonce.value.image=this.urlImageUpdate,[4,this.loadingController.create({duration:2e3})];case 2:return[4,(e=t.sent()).present()];case 3:return t.sent(),this.plantesService.updatePlante(this.id,this.urlImage,this.annonce.value),[4,e.onDidDismiss()];case 4:return t.sent(),[4,this.alertController.create({header:"F\xe9licitation",message:"La ou les modification(s) on ou \xe0 bien \xe9tait \xe9ffectuer",buttons:["OK"]})];case 5:return[4,t.sent().present()];case 6:t.sent(),this.modalController.dismiss({dismissed:!0}),t.label=7;case 7:return[2]}})})},e.prototype.closeModal=function(){this.modalController.dismiss({dismissed:!0})},e.\u0275fac=function(t){return new(t||e)(r.Y36(u.Br),r.Y36(l.Q1),r.Y36(a.B),r.Y36(s.I),r.Y36(c.y),r.Y36(u.IN),r.Y36(i.qu),r.Y36(d.V1),r.Y36(m.ST),r.Y36(u.HT),r.Y36(p.a),r.Y36(g.F0),r.Y36(h.D))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-modal"]],decls:92,vars:18,consts:[["slot","end",3,"click"],["size","large","name","close-circle-outline"],[2,"background-color","silver"],[3,"formGroup","ngSubmit"],["color","light"],["color","light","type","text","placeholder","nom","id","nom","value","","formControlName","nom"],["class","error ion-padding",4,"ngIf"],["color","light","placeholder","Select One","required","","id","variete","value","","formControlName","variete"],[3,"value",4,"ngFor","ngForOf"],["color","light","type","text","placeholder","couleur","required","","id","couleur","value","","formControlName","couleur"],["color","light","placeholder","fleuraison","required","","id","fleuraison","value","","formControlName","fleuraison",2,"display","none"],["value","Annuelles"],["value","Bisannuelles"],["value","Vivaces"],["value","Aromatiques"],["color","light","placeholder","Select One","required","","id","fleuraisonLF","value","","formControlName","fleuraison",2,"display","none"],["value","Ete"],["value","Hiver"],["color","light",4,"ngIf"],["color","light","placeholder","de","required","","formControlName","de","id","de"],["color","light",2,"width","2em"],["color","light","placeholder","a","required","","formControlName","a","id","a"],["color","light","placeholder","Select One","required","","id","hauteur","value","","formControlName","hauteur"],["value","basse"],["value","moyenne"],["value","haute"],["color","light","rows","6","cols","20","placeholder","description","required","","formControlName","description","id","description","value",""],["color","light","placeholder","Select One","required","","id","type","value","","formControlName","type"],["value","Fleur"],["value","Fruit"],["value","Legumes"],["expand","block","id","imageB",3,"click"],["name","image","slot","start"],[1,"flex"],[1,"img-box"],["id","urlimage",3,"src"],["type","submit","expand","block"],[1,"error","ion-padding"],[3,"value"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-title"),r._uU(3,"modifier la plante"),r.qZA(),r.TgZ(4,"ion-buttons",0),r.NdJ("click",function(){return t.closeModal()}),r._UZ(5,"ion-icon",1),r.qZA(),r.qZA(),r.qZA(),r.TgZ(6,"ion-content"),r.TgZ(7,"ion-list",2),r.TgZ(8,"form",3),r.NdJ("ngSubmit",function(){return t.addAnnonce()}),r.TgZ(9,"ion-item"),r.TgZ(10,"ion-label",4),r._uU(11,"Nom commun :"),r.qZA(),r._UZ(12,"ion-input",5),r.YNc(13,Z,2,0,"span",6),r.YNc(14,v,2,0,"span",6),r.qZA(),r.TgZ(15,"ion-item"),r.TgZ(16,"ion-label",4),r._uU(17,"Vari\xe9t\xe9:"),r.qZA(),r.TgZ(18,"ion-select",7),r.YNc(19,q,2,2,"ion-select-option",8),r.ALo(20,"async"),r.qZA(),r.qZA(),r.TgZ(21,"ion-item"),r.TgZ(22,"ion-label",4),r._uU(23,"Couleur:"),r.qZA(),r._UZ(24,"ion-input",9),r.YNc(25,b,2,0,"span",6),r.YNc(26,A,2,0,"span",6),r.qZA(),r.TgZ(27,"ion-item"),r.TgZ(28,"ion-label",4),r._uU(29),r.qZA(),r.TgZ(30,"ion-select",10),r.TgZ(31,"ion-select-option",11),r._uU(32,"Annuelles"),r.qZA(),r.TgZ(33,"ion-select-option",12),r._uU(34,"Bisannuelles"),r.qZA(),r.TgZ(35,"ion-select-option",13),r._uU(36,"Vivaces"),r.qZA(),r.TgZ(37,"ion-select-option",14),r._uU(38,"Aromatiques"),r.qZA(),r.qZA(),r.TgZ(39,"ion-select",15),r.TgZ(40,"ion-select-option",16),r._uU(41,"Ete"),r.qZA(),r.TgZ(42,"ion-select-option",17),r._uU(43,"Hiver"),r.qZA(),r.qZA(),r.YNc(44,y,2,0,"span",6),r.YNc(45,T,2,0,"span",6),r.qZA(),r.TgZ(46,"ion-item"),r.YNc(47,C,2,0,"ion-label",18),r.YNc(48,_,2,0,"ion-label",18),r.TgZ(49,"ion-item"),r.TgZ(50,"ion-select",19),r.YNc(51,I,2,2,"ion-select-option",8),r.qZA(),r.qZA(),r.TgZ(52,"ion-item"),r.TgZ(53,"ion-label",20),r._uU(54,"\xe0"),r.qZA(),r.qZA(),r.TgZ(55,"ion-item"),r.TgZ(56,"ion-select",21),r.YNc(57,U,2,2,"ion-select-option",8),r.qZA(),r.qZA(),r.qZA(),r.TgZ(58,"ion-item"),r.TgZ(59,"ion-label",4),r._uU(60,"Hauteur:"),r.qZA(),r.TgZ(61,"ion-select",22),r.TgZ(62,"ion-select-option",23),r._uU(63,"basse"),r.qZA(),r.TgZ(64,"ion-select-option",24),r._uU(65,"moyenne"),r.qZA(),r.TgZ(66,"ion-select-option",25),r._uU(67,"haute"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(68,"ion-item"),r.TgZ(69,"ion-label",4),r._uU(70,"Description:"),r.qZA(),r._UZ(71,"ion-textarea",26),r.YNc(72,S,2,0,"span",6),r.YNc(73,k,2,0,"span",6),r.qZA(),r.TgZ(74,"ion-item"),r.TgZ(75,"ion-label",4),r._uU(76,"Type de plante"),r.qZA(),r.TgZ(77,"ion-select",27),r.TgZ(78,"ion-select-option",28),r._uU(79,"Fleur"),r.qZA(),r.TgZ(80,"ion-select-option",29),r._uU(81,"Fruit"),r.qZA(),r.TgZ(82,"ion-select-option",30),r._uU(83,"L\xe9gume"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(84,"ion-button",31),r.NdJ("click",function(){return t.addPhoto()}),r._UZ(85,"ion-icon",32),r._uU(86," Ouvrir la biblioth\xe8que "),r.qZA(),r.TgZ(87,"div",33),r.TgZ(88,"div",34),r._UZ(89,"img",35),r.qZA(),r.qZA(),r.TgZ(90,"ion-button",36),r._uU(91,"Valider"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(8),r.Q6J("formGroup",t.annonce),r.xp6(5),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.nom.errors?null:t.errorControl.nom.errors.required)),r.xp6(1),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.nom.errors?null:t.errorControl.nom.errors.minlength)),r.xp6(5),r.Q6J("ngForOf",r.lcZ(20,16,t.varieters)),r.xp6(6),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.couleur.errors?null:t.errorControl.couleur.errors.required)),r.xp6(1),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.couleur.errors?null:t.errorControl.couleur.errors.minlength)),r.xp6(3),r.Oqu(t.texte),r.xp6(15),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.fleuraison.errors?null:t.errorControl.fleuraison.errors.required)),r.xp6(1),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.fleuraison.errors?null:t.errorControl.fleuraison.errors.minlength)),r.xp6(2),r.Q6J("ngIf","Fruit"===t.epoque||"Legumes"===t.epoque),r.xp6(1),r.Q6J("ngIf","Fleur"===t.epoque),r.xp6(3),r.Q6J("ngForOf",t.listMois),r.xp6(6),r.Q6J("ngForOf",t.listMois),r.xp6(15),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.description.errors?null:t.errorControl.description.errors.required)),r.xp6(1),r.Q6J("ngIf",t.isSubmitted&&(null==t.errorControl.description.errors?null:t.errorControl.description.errors.minlength)),r.xp6(16),r.Q6J("src",t.image,r.LSH))},directives:[u.Gu,u.sr,u.wd,u.Sm,u.gu,u.W2,u.q_,i._Y,i.JL,i.sg,u.Ie,u.Q$,u.pK,u.j9,i.JJ,i.u,f.O5,u.t9,u.QI,i.Q7,f.sg,u.n0,u.g2,u.YG],pipes:[f.Ov],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color:#3366a0}ion-content[_ngcontent-%COMP%]{color:#fff;--ion-background-color:linear-gradient(#3366a0,#9eb7d2)}ion-back-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{--background:#9eb7d2}#imageB[_ngcontent-%COMP%]{--background:#7699bf}ion-item[_ngcontent-%COMP%]{--ion-background-color:#0000!important}.segement[_ngcontent-%COMP%]{--background:#3467a0}.commande[_ngcontent-%COMP%]{text-align:center}.bouttonCommande[_ngcontent-%COMP%]{--background:#7296be}"]}),e}()},620:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});var o=n(3530),i=n(5366),r=n(7617),u=n(80),l=function(){function e(e,t){this.firestore=e,this.afSG=t,this.ref="Client",this.client=this.firestore.collection("Client")}return e.prototype.getListClients=function(){return this.client.valueChanges()},e.prototype.getClientsList=function(){return this.client.valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.postClient=function(e){return this.client.add(e)},e.prototype.getClient=function(e){return this.client.doc("/"+e).valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.updateClient=function(e,t){this.client.doc("/"+e).update(t)},e.prototype.deleteClient=function(e){return this.client.doc("/"+e).delete()},e.\u0275fac=function(t){return new(t||e)(i.LFG(r.ST),i.LFG(u.Q1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},1618:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var o=n(3530),i=n(5366),r=n(7617),u=n(80),l=function(){function e(e,t){this.firestore=e,this.afSG=t,this.ref="Commandes",this.commande=this.firestore.collection("Commandes")}return e.prototype.getListCommandes=function(){return this.commande.valueChanges()},e.prototype.getCommandesList=function(){return this.commande.valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.postCommande=function(e){return this.commande.add(e)},e.prototype.getDetailCommande=function(e){return this.commande.doc("/"+e).valueChanges().pipe((0,o.P)()).toPromise()},e.prototype.updateCommande=function(e,t){this.commande.doc("/"+e).update(t)},e.prototype.deleteCommande=function(e){return this.commande.doc("/"+e).delete()},e.prototype.updateArchive=function(e,t){this.commande.doc("/"+e).set(t)},e.\u0275fac=function(t){return new(t||e)(i.LFG(r.ST),i.LFG(u.Q1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},5411:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var o=n(5366),i=n(4812),r=function(){function e(e){this.toast=e}return e.prototype.showToast=function(e){this.myToast=this.toast.create({message:e,duration:2e3,position:"top",cssClass:"message"}).then(function(e){console.log(e),e.present()})},e.\u0275fac=function(t){return new(t||e)(o.LFG(i.yF))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);