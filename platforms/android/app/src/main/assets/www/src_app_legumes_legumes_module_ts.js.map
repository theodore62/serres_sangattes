{"version":3,"sources":["./src/app/legumes/legumes-routing.module.ts","./src/app/legumes/legumes.module.ts","./src/app/legumes/legumes.page.ts","./src/app/legumes/legumes.page.scss","./src/app/legumes/legumes.page.html"],"names":[],"mappings":"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","file":"src_app_legumes_legumes_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LegumesPage } from './legumes.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LegumesPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LegumesPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LegumesPageRoutingModule } from './legumes-routing.module';\r\n\r\nimport { LegumesPage } from './legumes.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LegumesPageRoutingModule\r\n  ],\r\n  declarations: [LegumesPage]\r\n})\r\nexport class LegumesPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n// base de données\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { IonicToastService } from '../services/ionic-toast.service';\r\nimport { DataService } from '../services/data.service';\r\nimport { first } from 'rxjs/Operators';\r\n// service\r\nimport { PlantesService } from '../services/plante/plantes.service';\r\n//model\r\nimport { Plante } from '../models/plante.model';\r\nimport {\r\n  AlertController,\r\n  IonRouterOutlet,\r\n  ModalController,\r\n} from '@ionic/angular';\r\nimport { ModalPage } from '../modal/modal.page';\r\n\r\n@Component({\r\n  selector: 'app-legumes',\r\n  templateUrl: './legumes.page.html',\r\n  styleUrls: ['./legumes.page.scss'],\r\n})\r\nexport class LegumesPage implements OnInit {\r\n  public datas: any;\r\n  public planteList: any;\r\n  public tableauPlante: any = [];\r\n  constructor(\r\n    private firestore: AngularFirestore,\r\n    private dataService: DataService,\r\n    private router: Router,\r\n    private plantesService: PlantesService,\r\n    private afSG: AngularFireStorage,\r\n    private alertController: AlertController,\r\n    private modalController: ModalController,\r\n    private routerOutlet: IonRouterOutlet\r\n  ) {}\r\n\r\n  async ngOnInit() {\r\n    this.datas = this.dataService.getData('data');\r\n    this.planteList = await this.initializeItems();\r\n  }\r\n\r\n  async doRefresh(event) {\r\n    const teste = await this.initializeItems();\r\n    console.log('Begin async operation');\r\n    setTimeout(() => {\r\n      this.planteList = teste;\r\n      console.log('Async operation has ended');\r\n      event.target.complete();\r\n    }, 2000);\r\n  }\r\n  async initializeItems(): Promise<any> {\r\n    this.tableauPlante = [];\r\n    const planteListe = await this.plantesService.getPlanteList();\r\n    planteListe.forEach((resulta) => {\r\n      if (resulta.fleuraison === this.datas && resulta.type === 'Legumes') {\r\n        console.log(resulta.image);\r\n        this.afSG\r\n          .ref('/' + resulta.image)\r\n          .getDownloadURL()\r\n          .subscribe((imgUrl) => {\r\n            resulta.image = imgUrl;\r\n            this.tableauPlante.push(resulta);\r\n          });\r\n      }\r\n    });\r\n    console.log(this.tableauPlante);\r\n\r\n    return this.tableauPlante;\r\n  }\r\n\r\n  async filterList(ev: any) {\r\n    this.planteList = await this.initializeItems();\r\n    const searchTerm = ev.srcElement.value;\r\n\r\n    if (!searchTerm) {\r\n      return;\r\n    }\r\n    this.planteList = this.planteList.filter((currentPlant) => {\r\n      if (currentPlant.nom && searchTerm) {\r\n        return (\r\n          currentPlant.nom.toLowerCase().indexOf(searchTerm.toLowerCase()) >\r\n            -1 ||\r\n          currentPlant.variete.toLowerCase().indexOf(searchTerm.toLowerCase()) >\r\n            -1 ||\r\n          currentPlant.couleur.toLowerCase().indexOf(searchTerm.toLowerCase()) >\r\n            -1 ||\r\n          currentPlant.hauteur.toLowerCase().indexOf(searchTerm.toLowerCase()) >\r\n            -1 ||\r\n          currentPlant.de.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1\r\n        );\r\n      }\r\n    });\r\n  }\r\n  detail(idPlante) {\r\n    this.dataService.setData('id', idPlante);\r\n    this.router.navigateByUrl('/details');\r\n  }\r\n  async delete(idPlante, url) {\r\n    this.afSG.refFromURL(url).delete();\r\n    this.plantesService.deletePlante(idPlante);\r\n    this.tableauPlante = [];\r\n    this.planteList = await this.initializeItems();\r\n    console.log(this.planteList);\r\n  }\r\n\r\n  async update(idPlante, anneeFleuraison) {\r\n    const modal = await this.modalController.create({\r\n      component: ModalPage,\r\n      cssClass: 'my-custom-class',\r\n      componentProps: { data:'plante', id: idPlante, fleuraison: anneeFleuraison },\r\n    });\r\n    return await modal.present();\r\n  }\r\n}\r\n","export default \":root {\\n  --ion-safe-area-top: 20px;\\n  --ion-safe-area-bottom: 22px;\\n}\\n\\nion-header {\\n  --ion-background-color: #3366a0;\\n}\\n\\nion-content {\\n  color: #fff;\\n  --ion-background-color: linear-gradient(#3366a0, #9eb7d2);\\n}\\n\\nion-title,\\nion-searchbar,\\nion-toolbar,\\nion-label,\\nion-item,\\nion-icon,\\nion-back-button {\\n  color: #fff;\\n}\\n\\nion-button {\\n  --background: #4070a6;\\n}\\n\\nion-item, ion-list, ion-item-options, ion-item-option {\\n  --ion-background-color: transparent !important;\\n}\\n\\n.my-custom-modal .modal-wrapper {\\n  height: 20%;\\n  top: 80%;\\n  position: absolute;\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxlZ3VtZXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0kseUJBQUE7RUFDQSw0QkFBQTtBQUNKOztBQUNFO0VBRUUsK0JBQUE7QUFDSjs7QUFHRTtFQUVFLFdBQUE7RUFDQSx5REFBQTtBQURKOztBQU9FOzs7Ozs7O0VBT0UsV0FBQTtBQUpKOztBQU1FO0VBQ0UscUJBQUE7QUFISjs7QUFLRTtFQUNFLDhDQUFBO0FBRko7O0FBSUU7RUFDRSxXQUFBO0VBQ0EsUUFBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtBQURKIiwiZmlsZSI6ImxlZ3VtZXMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOnJvb3Qge1xyXG4gICAgLS1pb24tc2FmZS1hcmVhLXRvcDogMjBweDtcclxuICAgIC0taW9uLXNhZmUtYXJlYS1ib3R0b206IDIycHg7XHJcbiAgfVxyXG4gIGlvbi1oZWFkZXIge1xyXG4gICAgLy92MlxyXG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjogIzMzNjZhMDtcclxuICAgIC8vdjFcclxuICAgIC8vIC0taW9uLWJhY2tncm91bmQtY29sb3I6ICNmNWFmMTk7XHJcbiAgfVxyXG4gIGlvbi1jb250ZW50IHtcclxuICAgIC8vdjJcclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjogbGluZWFyLWdyYWRpZW50KCMzMzY2YTAsICM5ZWI3ZDIpO1xyXG4gICAgLy92MVxyXG4gICAgLy8gLS1pb24tYmFja2dyb3VuZC1jb2xvcjogbGluZWFyLWdyYWRpZW50KCNmNWFmMTksICNmMTI3MTEpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLy9cclxuICAvL3YyXHJcbiAgaW9uLXRpdGxlLFxyXG4gIGlvbi1zZWFyY2hiYXIsXHJcbiAgaW9uLXRvb2xiYXIsXHJcbiAgaW9uLWxhYmVsLFxyXG4gIGlvbi1pdGVtLFxyXG4gIGlvbi1pY29uLFxyXG4gIGlvbi1iYWNrLWJ1dHRvbiAge1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbiAgfVxyXG4gIGlvbi1idXR0b24ge1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjNDA3MGE2O1xyXG4gIH1cclxuICBpb24taXRlbSxpb24tbGlzdCxpb24taXRlbS1vcHRpb25zLGlvbi1pdGVtLW9wdGlvbiB7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xyXG4gIH1cclxuICAubXktY3VzdG9tLW1vZGFsIC5tb2RhbC13cmFwcGVyIHtcclxuICAgIGhlaWdodDogMjAlO1xyXG4gICAgdG9wOiA4MCU7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7IFxyXG4gICAgZGlzcGxheTogYmxvY2s7ICBcclxuICB9Il19 */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Légumes</ion-title>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n    <ion-searchbar (ionChange)=\\\"filterList($event)\\\"></ion-searchbar>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  <ion-list *ngFor=\\\"let plante of (planteList)\\\" color=\\\"light\\\">\\r\\n    <ion-item-sliding>\\r\\n      <ion-item (click)=\\\"detail(plante.id)\\\">\\r\\n        <ion-thumbnail slot=\\\"start\\\">\\r\\n          <ion-img [src]=\\\"plante.image\\\"></ion-img>\\r\\n        </ion-thumbnail>\\r\\n        <ion-label>{{plante.nom }}</ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item-options side=\\\"end\\\">\\r\\n        <ion-item-option (click)=\\\"delete(plante.id,plante.image)\\\" color='red'>\\r\\n          <ion-icon name=\\\"trash-outline\\\" size=\\\"small\\\"></ion-icon>\\r\\n        </ion-item-option>\\r\\n        <ion-item-option (click)=\\\"update(plante.id,plante.fleuraison)\\\" color='red'>\\r\\n          <img src=\\\"https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png\\\" />\\r\\n        </ion-item-option>\\r\\n      </ion-item-options>\\r\\n    </ion-item-sliding>\\r\\n  </ion-list>\\r\\n</ion-content>\";"],"sourceRoot":"webpack:///"}