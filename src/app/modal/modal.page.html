<ion-header>
  <ion-toolbar>
    <ion-title *ngIf="data === 'plante'">modifier la plante</ion-title>
    <ion-title *ngIf="data === 'commande'">modifier la Commande</ion-title>
    <ion-title *ngIf="data === 'client'">détail sûr le client</ion-title>
    <ion-buttons slot="end" (click)="closeModal()">
      <ion-icon size="large" name="close-circle-outline"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- /***************************************************************************/ -->
<!-- /****************************client*****************************************/ -->
<!-- /***************************************************************************/ -->
<ion-toolbar *ngIf="data === 'client'" class="segement">
  <!-- Disabled Segment -->
  <ion-segment (ionChange)="segmentChanged($event)" value="ajouter">
    <ion-segment-button value="ajouter">
      <ion-label>
        <ion-icon  name="person-outline" size="small"></ion-icon>
      </ion-label>
    </ion-segment-button>
    <ion-segment-button value="liste">
      <ion-label>
        <ion-icon name="list-outline" size="small"></ion-icon>
      </ion-label>
    </ion-segment-button>
  </ion-segment>
</ion-toolbar>
<ion-content *ngIf="data === 'client' && affichage === 'ajouter'" class="client">
  <ion-item class="titre">
    <ion-label color="light">Détails du client:</ion-label>
  </ion-item>
  <form (ngSubmit)="addClient()" color="light" [formGroup]="formulaireClient">
    <ion-item>
      <ion-label color="light">nom:</ion-label>
      <ion-input color="light" type="text" placeholder="nom" id="nom" formControlName="nom"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.nom.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.nom.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Prénom:</ion-label>
      <ion-input color="light" type="text" placeholder="prenom" id="prenom" formControlName="prenom"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.prenom.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.prenom.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Email:</ion-label>
      <ion-input color="light" type="email" placeholder="email" id="email" formControlName="email"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.email.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.email.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Téléphone fixe:</ion-label>
      <ion-input color="light" type="number" placeholder="fixe" id="fixe" formControlName="fixe"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.fixe.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.fixe.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Téléphone portable:</ion-label>
      <ion-input color="light" type="number" placeholder="portable" id="portable" formControlName="portable">
      </ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.portable.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.portable.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Adresse:</ion-label>
      <ion-input color="light" type="text" placeholder="adresse" id="adresse" formControlName="adresse"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.adresse.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.adresse.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Code postal:</ion-label>
      <ion-input color="light" type="number" placeholder="postal" id="postal" formControlName="postal"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.postal.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.postal.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-button type="submit" expand="block">Valider</ion-button>
  </form>
</ion-content>
<ion-content *ngIf="data === 'client' && affichage === 'liste'" class="client">
  <ion-item class="titre">
    <ion-label color="light" > Liste des commandes</ion-label>
  </ion-item>
  <ion-item>
    <ion-searchbar (ionChange)="filterList($event)" placeholder="recherche"></ion-searchbar>
  </ion-item>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-list  *ngFor="let commande of (commandesList)">
    <ion-item-sliding *ngIf="commande.client === idClient ">
      <ion-item *ngIf="commande.client === idClient ">
        <ion-label color="light">{{commande.numero }}</ion-label>
      </ion-item>
      <ion-item-options side="end" *ngIf="commande.client === idClient ">
        <ion-item-option (click)="delete(commande.id)" color="red">
          <ion-icon name="trash-outline" size="small" color="light"></ion-icon>
        </ion-item-option>
        <ion-item-option  (click)="update(commande.id,commande.client)" color='red'>
          <img src="https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png" />
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

</ion-content>


<!-- /***************************************************************************/ -->
<!-- /****************************Plantes****************************************/ -->
<!-- /***************************************************************************/ -->

<ion-content *ngIf="data === 'plante'">

  <ion-list style="background-color: silver;">
    <form (ngSubmit)="addAnnonce()" [formGroup]="annonce">
      <ion-item>
        <ion-label color="light">Nom commun :</ion-label>
        <ion-input color="light" type="text" placeholder="nom" id='nom' value='' formControlName="nom"></ion-input>
        <!-- Error messages -->
        <span class="error ion-padding" *ngIf="isSubmitted && errorControl.nom.errors?.required">
          champ obligatoire
        </span>
        <span class="error ion-padding" *ngIf="isSubmitted && errorControl.nom.errors?.minlength">
          minimun 2 caractéres
        </span>
      </ion-item>
      <ion-item>
        <ion-label color="light">Variété:</ion-label>
        <ion-select color="light" placeholder="Select One" required id='variete' value='' formControlName="variete">
          <ion-select-option *ngFor="let varieter of varieters |async" value="{{ varieter.nom  }}">{{ varieter.nom }}
          </ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label color="light">Couleur:</ion-label>
        <ion-input color="light" type="text" placeholder="couleur" required id='couleur' value=''
          formControlName="couleur"></ion-input>
        <span class="error ion-padding" *ngIf="isSubmitted && errorControl.couleur.errors?.required">
          champ obligatoire
        </span>
        <span class="error ion-padding" *ngIf="isSubmitted && errorControl.couleur.errors?.minlength">
          minimun 2 caractéres
        </span>
      </ion-item>
      <ion-item>
        <ion-label color="light">{{ texte }}</ion-label>

        <ion-select color="light" placeholder="fleuraison" required id='fleuraison' value=''
          formControlName="fleuraison" style="display: none;">
          <ion-select-option value="Annuelles">Annuelles</ion-select-option>
          <ion-select-option value="Bisannuelles">Bisannuelles</ion-select-option>
          <ion-select-option value="Vivaces">Vivaces</ion-select-option>
          <ion-select-option value="Aromatiques">Aromatiques</ion-select-option>
        </ion-select>

        <ion-select color="light" placeholder="Select One" required id='fleuraisonLF' value=''
          formControlName="fleuraison" style="display: none;">
          <ion-select-option value="Ete">Ete</ion-select-option>
          <ion-select-option value="Hiver">Hiver</ion-select-option>
        </ion-select>

        <span class="error ion-padding" *ngIf="isSubmitted && errorControl.fleuraison.errors?.required">
          champ obligatoire
        </span>
        <span class="error ion-padding" *ngIf="isSubmitted && errorControl.fleuraison.errors?.minlength">
          minimun 2 caractéres
        </span>
      </ion-item>
      <ion-item>
        <ion-label color="light" *ngIf="epoque === 'Fruit' || epoque === 'Legumes' ">période de récolte:</ion-label>
        <ion-label color="light" *ngIf="epoque === 'Fleur' ">Mois de fleuraison:</ion-label>
        <ion-item>
          <ion-select color="light" placeholder="de" required formControlName="de" id="de">
            <ion-select-option *ngFor="let mois of listMois" value="{{ mois }}">{{ mois }}</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label color="light" style="width: 2em;">à</ion-label>
        </ion-item>
        <ion-item>
          <ion-select color="light" placeholder="a" required formControlName="a" id="a">
            <ion-select-option *ngFor="let mois of listMois" value="{{ mois }}">{{ mois }}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-item>

      <ion-item>
        <ion-label color="light">Hauteur:</ion-label>
        <ion-select color="light" placeholder="Select One" required id='hauteur' value='' formControlName="hauteur">
          <ion-select-option value="basse">basse</ion-select-option>
          <ion-select-option value="moyenne">moyenne</ion-select-option>
          <ion-select-option value="haute">haute</ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label color="light">Description:</ion-label>

        <ion-textarea color="light" rows="6" cols="20" placeholder="description" required formControlName="description"
          id='description' value=''></ion-textarea>
        <span class="error ion-padding" *ngIf="isSubmitted && errorControl.description.errors?.required">
          champ obligatoire
        </span>
        <span class="error ion-padding" *ngIf="isSubmitted && errorControl.description.errors?.minlength">
          minimun 2 caractéres
        </span>
      </ion-item>
      <ion-item>
        <ion-label color="light">Type de plante</ion-label>
        <ion-select color="light" placeholder="Select One" required id='type' value='' formControlName="type">
          <ion-select-option value="Fleur">Fleur</ion-select-option>
          <ion-select-option value="Fruit">Fruit</ion-select-option>
          <ion-select-option value="Legumes">Légume</ion-select-option>
        </ion-select>
      </ion-item>
      <ion-button (click)="addPhoto()" expand="block" id="imageB">
        <ion-icon name="image" slot="start"></ion-icon>
        Ouvrir la bibliothèque
      </ion-button>
      <div class="flex">
        <div class="img-box">
          <img id='urlimage' [src]="image">
        </div>
      </div>
      <ion-button type="submit" expand="block">Valider</ion-button>
    </form>
  </ion-list>
</ion-content>