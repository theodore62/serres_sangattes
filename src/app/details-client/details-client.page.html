<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>détail sûr le client</ion-title>
  </ion-toolbar>
  <ion-toolbar class="segement">
    <!-- Disabled Segment -->
    <ion-segment (ionChange)="segmentChanged($event)" value="ajouter">
      <ion-segment-button value="ajouter">
        <ion-label>
          <ion-icon name="person-outline" size="small"></ion-icon>
        </ion-label>
      </ion-segment-button>
      <ion-segment-button value="liste">
        <ion-label>
          <ion-icon name="list-outline" size="small"></ion-icon>
        </ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>


<ion-content *ngIf=" affichage === 'ajouter'" class="client">
  <ion-item class="titre">
    <ion-label color="light">Détails du client:</ion-label>
  </ion-item>
  <form (ngSubmit)="updateClient()" color="light" [formGroup]="formulaireClient">
    <ion-item>
      <ion-label color="light">nom:</ion-label>
      <ion-input color="light" type="text" placeholder="nom" id="nom" formControlName="nom"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.nom.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.nom.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Prénom:</ion-label>
      <ion-input color="light" type="text" placeholder="prenom" id="prenom" formControlName="prenom"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.prenom.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.prenom.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Email:</ion-label>
      <ion-input color="light" type="email" placeholder="email" id="email" formControlName="email"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.email.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.email.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Téléphone fixe:</ion-label>
      <ion-input color="light" type="number" placeholder="fixe" id="fixe" formControlName="fixe"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.fixe.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.fixe.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Téléphone portable:</ion-label>
      <ion-input color="light" type="number" placeholder="portable" id="portable" formControlName="portable">
      </ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.portable.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.portable.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Adresse:</ion-label>
      <ion-input color="light" type="text" placeholder="adresse" id="adresse" formControlName="adresse"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.adresse.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.adresse.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-item>
      <ion-label color="light">Code postal:</ion-label>
      <ion-input color="light" type="number" placeholder="postal" id="postal" formControlName="postal"></ion-input>
      <!-- Error messages -->
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.postal.errors?.required"
        class="color">
        champ obligatoire
      </span>
      <span class="error ion-padding" color="light" *ngIf="isSubmitted && errorControl.postal.errors?.minlength"
        class="color">
        minimun 2 caractéres
      </span>
    </ion-item>
    <ion-button type="submit" expand="block">Valider</ion-button>
  </form>
</ion-content>
<ion-content *ngIf="affichage === 'liste'" class="client">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-item class="titreAjouter">
    <ion-label color="light"> Liste des commandes</ion-label>
  </ion-item>
  <ion-item>
    <ion-searchbar (ionChange)="filterList($event)" placeholder="recherche"></ion-searchbar>
  </ion-item>
  <ion-item class="titreAjouter">
    <ion-label color="light"> Liste des commandes en cour</ion-label>
  </ion-item>
  <ion-list *ngFor="let commande of (commandesList)" class="titreAjouter">
    <ion-item-sliding *ngIf="!commande.archive">
      <ion-item>
        <ion-label color="light">N°{{commande.numero }}</ion-label>
        <ion-label color="light">Date: {{commande.date | date:'dd/MM/yyyy'}}</ion-label>
      </ion-item>
      <ion-item-options side="end">
        <ion-item-option (click)="delete(commande.id)" color="red">
          <ion-icon name="trash-outline" size="small" color="light"></ion-icon>
        </ion-item-option>
        <ion-item-option (click)="update(commande.id,commande.client)" color='red'>
          <img src="https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png" />
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

  <ion-item class="titreAjouter">
    <ion-label color="light"> Liste des commandes archivées</ion-label>
  </ion-item>
  <ion-list *ngFor="let commande of (commandesList)" class="titreAjouter">
    <ion-item-sliding *ngIf="commande.archive">
      <ion-item>
        <ion-label color="light">N°{{commande.numero }}</ion-label>
        <ion-label color="light">Date: {{commande.date | date:'dd/MM/yyyy'}}</ion-label>
      </ion-item>
      <ion-item-options side="end">
        <ion-item-option (click)="delete(commande.id)" color="red">
          <ion-icon name="trash-outline" size="small" color="light"></ion-icon>
        </ion-item-option>
        <ion-item-option (click)="update(commande.id,commande.client)" color='red'>
          <img src="https://img.icons8.com/carbon-copy/25/000000/approve-and-update.png" />
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

</ion-content>